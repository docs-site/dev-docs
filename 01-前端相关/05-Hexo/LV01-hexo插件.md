---
title: LV01-hexoæ’ä»¶
date: 2025-07-12 09:23:41
icon: famicons:logo-markdown
index: true
tags:
categories:
---

æœ¬æ–‡ä¸»è¦æ˜¯Hexoä¸­çš„ä¸¤ç§çš„ç›¸å…³ç¬”è®°ï¼Œè‹¥ç¬”è®°ä¸­æœ‰é”™è¯¯æˆ–è€…ä¸åˆé€‚çš„åœ°æ–¹ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ğŸ˜ƒã€‚

<!-- more -->

åœ¨çœ‹`Hexo`æ–‡æ¡£çš„æ—¶å€™å‘ç°äº†å…³äº`Hexo`ä¸­çš„æ’ä»¶çš„ç›¸å…³çŸ¥è¯†ï¼Œäºæ˜¯å°±å»æ‰¾äº†ä¸€äº›æ’ä»¶çš„æºç ï¼Œäº†è§£äº†ä¸€ä¸‹å¤§æ¦‚çš„æ’ä»¶ç¼–å†™çš„æ ¼å¼ï¼Œæœ¬æ–‡æ˜¯è®°å½•ä¸€ä¸‹è‡ªå·±å¼€å§‹å°è¯•`Hexo`æ’ä»¶çš„ç¬¬ä¸€æ­¥ã€‚

## ä¸€ã€`Hexo`çš„æ’ä»¶

### 1. ä¸¤ç§æ’ä»¶

åœ¨`Hexo`ä¸­ï¼Œæœ‰å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿï¼Œä½¿å¼€å‘è€…èƒ½å¶è½»æ¾æ‰©å±•åŠŸèƒ½è€Œä¸ç”¨ä¿®æ”¹æ ¸å¿ƒæ¨¡å—çš„æºç ã€‚å®ƒçš„æ’ä»¶åˆ†ä¸ºä¸¤ç§ï¼šè„šæœ¬ï¼ˆ`Scripts`ï¼‰å’Œæ’ä»¶ï¼ˆ`Packages`ï¼‰ã€‚

å¦‚æœè‡ªå·±çš„ä»£ç å¾ˆç®€å•ï¼Œå¯ä»¥ç¼–å†™è„šæœ¬ï¼Œè¿™ä¸ªæ—¶å€™åªéœ€è¦æŠŠè‡ªå·±ç¼–å†™çš„`JavaScript`æ–‡ä»¶æ”¾åˆ°`[site]/scripts`æ–‡ä»¶å¤¹ï¼Œæ•´ä¸ªæ–‡ä»¶å¤¹ä¸€èˆ¬é»˜è®¤æ˜¯æ²¡æœ‰çš„ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹åˆ›å»ºï¼Œæ•´ä¸ªæ–‡ä»¶å¤¹ä¸­çš„è„šæœ¬æ–‡ä»¶åœ¨å¯åŠ¨æ—¶å°±ä¼šè‡ªåŠ¨è½½å…¥ã€‚

å¦ä¸€ç§åˆ™é€‚åˆè‡ªå·±çš„ä»£ç è¾ƒä¸ºå¤æ‚çš„æƒ…å†µï¼Œæˆ–æ˜¯è‡ªå·±æƒ³è¦å‘å¸ƒåˆ°`npm`ä¸Šï¼Œé¦–å…ˆï¼Œåœ¨`node_modules`æ–‡ä»¶å¤¹ä¸­å»ºç«‹æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹åç§°å¼€å¤´å¿…é¡»ä¸º`hexo-`ï¼Œå¦‚æ­¤ä¸€æ¥`Hexo`æ‰ä¼šåœ¨å¯åŠ¨æ—¶è½½å…¥ï¼Œå¦åˆ™`Hexo`å°†ä¼šå¿½ç•¥å®ƒã€‚æ–‡ä»¶å¤¹å†…è‡³å°‘è¦åŒ…å«`2`ä¸ªæ–‡ä»¶ï¼šä¸€ä¸ªæ˜¯ä¸»ç¨‹åºï¼Œå¦ä¸€ä¸ªæ˜¯ `package.json`ï¼Œæè¿°æ’ä»¶çš„ç”¨é€”å’Œæ‰€ä¾èµ–çš„æ’ä»¶ã€‚

<table>
	<tbody>
		<tr>
			<td align="left">
			Hexoè¯´æ˜æ–‡æ¡£
			</td>
			<td align="left">
			<a href="https://hexo.io/zh-cn/docs/" target="_blank">https://hexo.io/zh-cn/docs/</a>
			</td>
		</tr>
		<tr>
			<td align="left">
			Hexo APIæ–‡æ¡£
			</td>
			<td align="left">
			<a href="https://hexo.io/zh-cn/api/" target="_blank">https://hexo.io/zh-cn/api/</a>
			</td>
		</tr>
	</tbody>
</table>

### 2. æ’ä»¶çš„åŠ è½½æµç¨‹

#### 2.1 è„šæœ¬ï¼ˆ`Scripts`ï¼‰çš„åŠ è½½

åœ¨é˜…è¯»æºç çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€éƒ¨åˆ†ä»£ç ï¼Œå¤§è‡´ç†è§£ä¸€ä¸‹ï¼Œå°±æ˜¯ä½¿ç”¨æ­¤å‡½æ•°å®Œæˆäº†æ ¹ç›®å½•ä¸‹`scripts`æ–‡ä»¶å¤¹å’Œä¸»é¢˜æ–‡ä»¶ç›®å½•ä¸‹çš„`scripts`æ–‡ä»¶å¤¹ä¸­çš„å„ä¸ªè„šæœ¬æ–‡ä»¶çš„åŠ è½½ã€‚

```JavaScript [site]/node_modules/hexo/lib/hexo/load_plugins.js
function loadScripts(ctx) {
  const baseDirLength = ctx.base_dir.length;

  function displayPath(path) {
    return magenta(path.substring(baseDirLength));
  }

  return Promise.filter([
    ctx.theme_script_dir,
    ctx.script_dir
  ], scriptDir => { // Ignore the directory if it does not exist
    return scriptDir ? exists(scriptDir) : false;
  }).map(scriptDir => listDir(scriptDir).map(name => {
    const path = join(scriptDir, name);

    return ctx.loadPlugin(path).then(() => {
      ctx.log.debug('Script loaded: %s', displayPath(path));
    }).catch(err => {
      ctx.log.error({err}, 'Script load failed: %s', displayPath(path));
    });
  }));
}
```

#### 2.2 æ’ä»¶ï¼ˆ`Packages`ï¼‰çš„åŠ è½½

`plugins`çš„åŠ è½½æ˜¯é€šè¿‡ä»¥ä¸‹å‡½æ•°å®Œæˆçš„ã€‚

```JavaScript [site]/node_modules/hexo/lib/hexo/load_plugins.js
function loadModules(ctx) {
  return loadModuleList(ctx).map(name => {
    const path = ctx.resolvePlugin(name);

    // Load plugins
    return ctx.loadPlugin(path).then(() => {
      ctx.log.debug('Plugin loaded: %s', magenta(name));
    }).catch(err => {
      ctx.log.error({err}, 'Plugin load failed: %s', magenta(name));
    });
  });
}
```

### 3.Â `Hexo`ç›¸å…³å‡½æ•°

åœ¨ä½¿ç”¨æ’ä»¶ä¹‹å‰ï¼Œè‚¯å®šè¦å…ˆäº†è§£ä¸€ä¸‹åŸºæœ¬çš„å‡½æ•°å•¦ï¼Œè¿™ä¸€èŠ‚çš„å†…å®¹å¤§éƒ¨åˆ†æ¥è‡ªäº`Hexo`å®˜æ–¹æ–‡æ¡£ã€‚

#### 3.1 è¿‡æ»¤å™¨ï¼ˆ`Filter`ï¼‰

##### 3.1.1Â å‡½æ•°åŸå‹

è¿‡æ»¤å™¨ç”¨äºä¿®æ”¹ç‰¹å®šæ–‡ä»¶ï¼Œ`Hexo`å°†è¿™äº›æ–‡ä»¶ä¾åºä¼ ç»™è¿‡æ»¤å™¨ï¼Œè€Œè¿‡æ»¤å™¨å¯ä»¥é’ˆå¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚

```JavaScript [site]/node_modules/hexo/lib/extend/filter.js
class Filter {
  constructor() {
    this.store = {};
  }
  register(type, fn, priority) {
    if (!priority) {
      if (typeof type === 'function') {
        priority = fn;
        fn = type;
        type = 'after_post_render';
      }
    }

    if (typeof fn !== 'function') throw new TypeError('fn must be a function');

    type = typeAlias[type] || type;
    priority = priority == null ? 10 : priority;

    const store = this.store[type] || [];
    this.store[type] = store;

    fn.priority = priority;
    store.push(fn);

    store.sort((a, b) => a.priority - b.priority);
  }
}
```
##### 3.1.2Â å‡½æ•°è¯´æ˜

```JavaScript
hexo.extend.filter.register(type, function() {
  // User configuration
  const { config } = this;
  if (config.external_link.enable) // do something...

  // Theme configuration
  const { config: themeCfg } = this.theme;
  if (themeCfg.fancybox) // do something...

}, priority);
```

**type**ï¼šä¸ºè¿‡æ»¤å™¨åˆ—è¡¨ï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°æ®ï¼Œä½¿ç”¨çš„æ—¶å€™è¦åŠ ä¸Š`''`ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹å€¼:

<table>
    <tbody>
      <tr>
        <td align="center">
        typeçš„å€¼
        </td>
        <td align="center">
        è¯´æ˜
        </td>
      </tr>
      <tr>
        <td align="center">
        before_post_render
        </td>
        <td align="left">
        åœ¨æ–‡ç« å¼€å§‹æ¸²æŸ“å‰æ‰§è¡Œã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        after_post_render
        </td>
        <td align="left">
        åœ¨æ–‡ç« æ¸²æŸ“å®Œæˆåæ‰§è¡Œã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        before_exit
        </td>
        <td align="left">
        åœ¨ Hexo å³å°†ç»“æŸæ—¶æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨ hexo.exit è¢«è°ƒç”¨åæ‰§è¡Œã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        before_generate
        </td>
        <td align="left">
        åœ¨ç”Ÿæˆå™¨è§£æå‰æ‰§è¡Œã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        after_generate
        </td>
        <td align="left">
        åœ¨ç”Ÿæˆå™¨è§£æåæ‰§è¡Œã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        template_locals
        </td>
        <td align="left">
        ä¿®æ”¹æ¨¡æ¿çš„<a href="https://hexo.io/zh-cn/docs/variables" target="_blank">å±€éƒ¨å˜é‡</a>ã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        after_init
        </td>
        <td align="left">
        åœ¨ Hexo åˆå§‹åŒ–å®Œæˆåæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨ hexo.init æ‰§è¡Œå®Œæˆåæ‰§è¡Œã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        new_post_path
        </td>
        <td align="left">
        ç”¨æ¥å†³å®šæ–°å»ºæ–‡ç« çš„è·¯å¾„ï¼Œåœ¨å»ºç«‹æ–‡ç« æ—¶æ‰§è¡Œã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        post_permalink
        </td>
        <td align="left">
        ç”¨æ¥å†³å®šæ–‡ç« çš„æ°¸ä¹…é“¾æ¥ã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        after_render
        </td>
        <td align="left">
        åœ¨<a href="https://hexo.io/zh-cn/api/rendering" target="_blank">æ¸²æŸ“</a>åæ‰§è¡Œã€‚
        </td>
      </tr>
      <tr>
        <td align="center">
        server_middleware
        </td>
        <td align="left">
        æ–°å¢æœåŠ¡å™¨çš„ Middlewareã€‚app æ˜¯ä¸€ä¸ª<a href="https://github.com/senchalabs/connect" target="_blank">Connect</a>å®ä¾‹ã€‚
        </td>
      </tr>
    </tbody>
</table>

**priority**ï¼šæ˜¯è¿‡æ»¤å™¨çš„ä¼˜å…ˆçº§ï¼Œ`priority` å€¼è¶Šä½ï¼Œè¿‡æ»¤å™¨ä¼šè¶Šæ—©æ‰§è¡Œï¼Œé»˜è®¤çš„ `priority` æ˜¯ 10ã€‚å»ºè®®æä¾›é…ç½®é€‰é¡¹å¦‚ `hexo.config.your_plugin.priority`ï¼Œè®©ç”¨æˆ·è‡ªè¡Œå†³å®šè¿‡æ»¤å™¨çš„ä¼˜å…ˆçº§ã€‚

#### 3.2 æ³¨å…¥å™¨ï¼ˆ`Injector`ï¼‰

##### 3.2.1Â å‡½æ•°åŸå‹

æ³¨å…¥å™¨è¢«ç”¨äºå°†é™æ€ä»£ç ç‰‡æ®µæ³¨å…¥ç”Ÿæˆçš„`HTML `çš„`<head></head>`æˆ–`<body></body>`ä¸­ã€‚`Hexo`å°†åœ¨ `after_render:html`è¿‡æ»¤å™¨ **ä¹‹å‰** å®Œæˆæ³¨å…¥ã€‚

```JavaScript [site]/node_modules/hexo/lib/extend/injector.js
class Injector {
  constructor() {
    this.store = {
      head_begin: {},
      head_end: {},
      body_begin: {},
      body_end: {}
    };

  register(entry, value, to = 'default') {
    if (!entry) throw new TypeError('entry is required');
    if (typeof value === 'function') value = value();

    const entryMap = this.store[entry] || this.store.head_end;
    const valueSet = entryMap[to] || new Set();
    valueSet.add(value);
    entryMap[to] = valueSet;
  }
}
```
##### 3.2.2 å‡½æ•°è¯´æ˜

```JavaScript
hexo.extend.injector.register(entry, value, to)
```

- **entry**:å­—ç¬¦ä¸²ç±»å‹æ•°æ®ï¼Œè¡¨ç¤ºä»£ç ç‰‡æ®µæ³¨å…¥çš„ä½ç½®ï¼Œæ¥å—ä»¥ä¸‹å€¼ï¼š

ï¼ˆ1ï¼‰`head_begin`: æ³¨å…¥åœ¨ `<head>` ä¹‹åï¼ˆé»˜è®¤ï¼‰

ï¼ˆ2ï¼‰`head_end`: æ³¨å…¥åœ¨ `</head>` ä¹‹å‰

ï¼ˆ3ï¼‰`body_begin`: æ³¨å…¥åœ¨ `<body>` ä¹‹å

ï¼ˆ4ï¼‰`body_end`: æ³¨å…¥åœ¨ `</body>` ä¹‹å‰

- **value**:å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ”¯æŒè¿”å›å€¼ä¸ºå­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œè¡¨ç¤ºéœ€è¦æ³¨å…¥çš„ä»£ç ç‰‡æ®µã€‚

- **to**:å­—ç¬¦ä¸²ç±»å‹æ•°æ®ï¼Œéœ€è¦æ³¨å…¥ä»£ç ç‰‡æ®µçš„é¡µé¢ç±»å‹ï¼Œæ¥å—ä»¥ä¸‹å€¼ï¼š

ï¼ˆ1ï¼‰`default`: æ³¨å…¥åˆ°æ¯ä¸ªé¡µé¢ï¼ˆé»˜è®¤å€¼ï¼‰

ï¼ˆ2ï¼‰`home`: åªæ³¨å…¥åˆ°ä¸»é¡µï¼ˆ`is_home() `ä¸º `true` çš„é¡µé¢ï¼‰

ï¼ˆ3ï¼‰`post`: åªæ³¨å…¥åˆ°æ–‡ç« é¡µé¢ï¼ˆ`is_post()` ä¸º `true` çš„é¡µé¢ï¼‰

ï¼ˆ4ï¼‰`page`: åªæ³¨å…¥åˆ°ç‹¬ç«‹é¡µé¢ï¼ˆ`is_page()` ä¸º `true` çš„é¡µé¢ï¼‰

ï¼ˆ5ï¼‰`archive`: åªæ³¨å…¥åˆ°å½’æ¡£é¡µé¢ï¼ˆ`is_archive()` ä¸º `true` çš„é¡µé¢ï¼‰

ï¼ˆ6ï¼‰`category`: åªæ³¨å…¥åˆ°åˆ†ç±»é¡µé¢ï¼ˆ`is_category()` ä¸º `true` çš„é¡µé¢ï¼‰

ï¼ˆ7ï¼‰`tag`: åªæ³¨å…¥åˆ°æ ‡ç­¾é¡µé¢ï¼ˆ`is_tag()` ä¸º `true` çš„é¡µé¢ï¼‰

å…¶ä»–è‡ªå®šä¹‰ `layout` åç§°ï¼Œè‡ªå®šä¹‰ `layout` å‚è€ƒ<a href="https://hexo.io/zh-cn/docs/writing" target="_blank">å†™ä½œ - å¸ƒå±€ï¼ˆ`Layout`ï¼‰</a>å®ä¾‹ã€‚ 

##### 3.2.3Â ç¤ºä¾‹ç¨‹åº

```JavaScript
const css = hexo.extend.helper.get('css').bind(hexo);
const js = hexo.extend.helper.get('js').bind(hexo);

hexo.extend.injector.register('head_end', () => {
  return css('https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css');
}, 'music');

hexo.extend.injector.register('body_end', '<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js">', 'music');

hexo.extend.injector.register('body_end', () => {
  return js('/js/jquery.js');
});
```

#### 3.3 è¾…åŠ©å‡½æ•°ï¼ˆ`Helper`ï¼‰

##### 3.3.1Â å‡½æ•°åŸå‹

è¾…åŠ©å‡½æ•°å¸®åŠ©æˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­å¿«é€Ÿæ’å…¥å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¤æ‚çš„ä»£ç æ”¾åœ¨è¾…åŠ©å‡½æ•°è€Œéæ¨¡æ¿ä¸­ã€‚

```JavaScript [site]/node_modules/hexo/lib/extend/helper.js
class Helper {
  constructor() {
    this.store = {};
  }
  /**
   * Register a helper plugin
   * @param {String} name - The name of the helper plugin
   * @param {Function} fn - The helper plugin function
   */
  register(name, fn) {
    if (!name) throw new TypeError('name is required');
    if (typeof fn !== 'function') throw new TypeError('fn must be a function');

    this.store[name] = fn;
  }
}
```
##### 3.3.2Â å‡½æ•°è¯´æ˜

```JavaScript
hexo.extend.helper.register(name, function(){
});
```
ç¤ºä¾‹å¦‚ä¸‹ï¼Œæ­¤ç¤ºä¾‹çš„ä½œç”¨æ˜¯å°†`js`å°è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œåªéœ€è¦è‡ªå·±å¡«å†™è¦è°ƒç”¨çš„è„šæœ¬æ–‡ä»¶åç§°ï¼Œå°±å¯ä»¥è°ƒç”¨ç‰¹å®šè·¯å¾„ä¸‹çš„ç›¸åº”æ–‡ä»¶ã€‚

```JavaScript
hexo.extend.helper.register('js', function(path){
  return '<script src="' + path + '"></script>';
});
```

å‡½æ•°æ³¨å†Œé€šè¿‡è¾…åŠ©å‡½æ•°æ³¨å†Œåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ ¼å¼è°ƒç”¨ã€‚

```html
//åœ¨nunjuckæ¨¡æ¿ä¸­ä½¿ç”¨æ ¼å¼
{{- js('script.js') }}

//æ¸²æŸ“ä¹‹åä¸ºä»¥ä¸‹è¯­å¥
<script src="script.js"></script>
```

## äºŒã€å°è¯•`Hexo`ä¸­æœ€åŸºæœ¬çš„æ’ä»¶

é¦–å…ˆå‘¢éœ€è¦åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ç«™ç‚¹ç›®å½•ï¼Œä¸åšä»»ä½•ä¿®æ”¹ï¼Œä»¥ä¾¿äºæµ‹è¯•è‡ªå·±çš„å†™çš„åŸºæœ¬æ’ä»¶æ˜¯å¦ç”Ÿæ•ˆã€‚ç„¶åå°±å¯ä»¥å¼€å§‹ç¼–å†™æ’ä»¶å•¦ğŸ˜„ã€‚

```shell
# åˆå§‹åŒ–ä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ä½œä¸ºç«™ç‚¹
hexo init npm-test

# è¿›å…¥è¯¥ç«™ç‚¹æ–‡ä»¶å¤¹ï¼Œ
cd npm-test
```

### 1. è„šæœ¬ï¼ˆ`Scripts`ï¼‰æµ‹è¯•

#### 1.1Â è¿‡æ»¤å™¨ï¼ˆ`Filter`ï¼‰æµ‹è¯•

åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ–°å»º`scripts`æ–‡ä»¶å¤¹ï¼Œå¹¶æ–°å»ºä¸€ä¸ª`test.js`æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œåœ¨ç¼–å†™ç¯å¢ƒæ§åˆ¶å°è¾“å‡ºä¸€æ®µæç¤ºå­—ç¬¦ã€‚

```JavaScript JavaScript
//before_exitè¡¨ç¤ºåœ¨ Hexo å³å°†ç»“æŸæ—¶æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨ hexo.exit è¢«è°ƒç”¨åæ‰§è¡Œ
var priority = 10;
hexo.extend.filter.register('before_exit', function() {
    console.log(`æµ‹è¯•ç¨‹åºåŠ è½½æˆåŠŸ(à¸…>Ï‰<*à¸…)`)
}, priority);

```

#### 1.2Â æ³¨å…¥å™¨ï¼ˆ`Injector`ï¼‰æµ‹è¯•

åœ¨`scripts/test.js`æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚è¯¥æµ‹è¯•ç¨‹åºå®ç°çš„æ•ˆæœæ˜¯åœ¨æ‰€æœ‰é¡µé¢åŠ è½½ä¸€ä¸ªç‚¹å‡»äº§ç”Ÿç¤¼èŠ±ç‚¸å¼€æ•ˆæœçš„è„šæœ¬ï¼Œå¹¶ä¸”åœ¨æ¸²æŸ“åé¡µé¢çš„æ§åˆ¶å°è¾“å‡ºä¸€æ®µæç¤ºå­—ç¬¦ã€‚è¯¥æ®µç¨‹åºå¯ä»¥ä¹Ÿå¯ä»¥æ”¾åœ¨è¿‡æ»¤å™¨ä¸­ã€‚

```JavaScript
var user_info_js = `
<script>
  class Circle {
    constructor({ origin, speed, color, angle, context }) {
      this.origin = origin
      this.position = { ...this.origin }
      this.color = color
      this.speed = speed
      this.angle = angle
      this.context = context
      this.renderCount = 0
    }
  
    draw() {
      this.context.fillStyle = this.color
      this.context.beginPath()
      this.context.arc(this.position.x, this.position.y, 2, 0, Math.PI * 2)
      this.context.fill()
    }
  
    move() {
      this.position.x = (Math.sin(this.angle) * this.speed) + this.position.x
      this.position.y = (Math.cos(this.angle) * this.speed) + this.position.y + (this.renderCount * 0.3)
      this.renderCount++
    }
  }
  
  class Boom {
    constructor ({ origin, context, circleCount = 16, area }) {
      this.origin = origin
      this.context = context
      this.circleCount = circleCount
      this.area = area
      this.stop = false
      this.circles = []
    }
  
    randomArray(range) {
      const length = range.length
      const randomIndex = Math.floor(length * Math.random())
      return range[randomIndex]
    }
  
    randomColor() {
      const range = ['8', '9', 'A', 'B', 'C', 'D', 'E', 'F']
      return '#' + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range)
    }
  
    randomRange(start, end) {
      return (end - start) * Math.random() + start
    }
  
    init() {
      for(let i = 0; i < this.circleCount; i++) {
        const circle = new Circle({
          context: this.context,
          origin: this.origin,
          color: this.randomColor(),
          angle: this.randomRange(Math.PI - 1, Math.PI + 1),
          speed: this.randomRange(1, 6)
        })
        this.circles.push(circle)
      }
    }
  
    move() {
      this.circles.forEach((circle, index) => {
        if (circle.position.x > this.area.width || circle.position.y > this.area.height) {
          return this.circles.splice(index, 1)
        }
        circle.move()
      })
      if (this.circles.length == 0) {
        this.stop = true
      }
    }
  
    draw() {
      this.circles.forEach(circle => circle.draw())
    }
  }
  
  class CursorSpecialEffects {
    constructor() {
      this.computerCanvas = document.createElement('canvas')
      this.renderCanvas = document.createElement('canvas')
  
      this.computerContext = this.computerCanvas.getContext('2d')
      this.renderContext = this.renderCanvas.getContext('2d')
  
      this.globalWidth = window.innerWidth
      this.globalHeight = window.innerHeight
  
      this.booms = []
      this.running = false
    }
  
    handleMouseDown(e) {
      const boom = new Boom({
        origin: { x: e.clientX, y: e.clientY },
        context: this.computerContext,
        area: {
          width: this.globalWidth,
          height: this.globalHeight
        }
      })
      boom.init()
      this.booms.push(boom)
      this.running || this.run()
    }
  
    handlePageHide() {
      this.booms = []
      this.running = false
    }
  
    init() {
      const style = this.renderCanvas.style
      style.position = 'fixed'
      style.top = style.left = 0
      style.zIndex = '999999999999999999999999999999999999999999'
      style.pointerEvents = 'none'
  
      style.width = this.renderCanvas.width = this.computerCanvas.width = this.globalWidth
      style.height = this.renderCanvas.height = this.computerCanvas.height = this.globalHeight
  
      document.body.append(this.renderCanvas)
  
      window.addEventListener('mousedown', this.handleMouseDown.bind(this))
      window.addEventListener('pagehide', this.handlePageHide.bind(this))
    }
  
    run() {
      this.running = true
      if (this.booms.length == 0) {
        return this.running = false
      }
  
      requestAnimationFrame(this.run.bind(this))
  
      this.computerContext.clearRect(0, 0, this.globalWidth, this.globalHeight)
      this.renderContext.clearRect(0, 0, this.globalWidth, this.globalHeight)
  
      this.booms.forEach((boom, index) => {
        if (boom.stop) {
          return this.booms.splice(index, 1)
        }
        boom.move()
        boom.draw()
      })
      this.renderContext.drawImage(this.computerCanvas, 0, 0, this.globalWidth, this.globalHeight)
    }
  }
  
  const cursorSpecialEffects = new CursorSpecialEffects()
  cursorSpecialEffects.init()
  console.log('ç‚¹å‡»æ•ˆæœç¨‹åºåŠ è½½æˆåŠŸ(à¸…>Ï‰<*à¸…)')
</script>
`
hexo.extend.injector.register('body_end', user_info_js, "default")
```
### 2. æ’ä»¶ï¼ˆ`Packages`ï¼‰æµ‹è¯•

ä¸Šè¾¹ä»‹ç»äº†è„šæœ¬ï¼ˆ`Scripts`ï¼‰çš„æµ‹è¯•ç¨‹åºï¼Œå‡†å¤‡å†™æ’ä»¶çš„æµ‹è¯•ç¨‹åºçš„æ—¶å€™å‘ç°ï¼Œæ’ä»¶çš„æµ‹è¯•ç¨‹åºå…¶å®å’Œä¸Šè¾¹çš„æµ‹è¯•ç¨‹åºæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªä¸è¿‡æ˜¯ä¸€ä¸ªç›´æ¥å»ºç«‹è„šæœ¬æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯å¦å¤–ç”Ÿæˆä¸€ä¸ªæ’ä»¶ï¼Œé‚£è¿™é‡Œå°±æ¢³ç†ä¸€ä¸‹ä»ç¼–å†™æµ‹è¯•æ’ä»¶åˆ°å®‰è£…æ’ä»¶ç„¶åè¿è¿è¡Œçš„è¿‡ç¨‹å§ã€‚

#### 2.1Â åˆ›å»ºæ’ä»¶æ–‡ä»¶å¤¹å¹¶è¿›è¡Œåˆå§‹åŒ–

```shell
# æ–°å»ºæ–‡ä»¶å¤¹
mkdir hexo-plugins-test
# è¿›å…¥æ’ä»¶æ–‡ä»¶å¤¹å¹¶åˆå§‹åŒ–
cd hexo-plugins-test/ && npm init
```
åˆ›å»ºå¹¶åˆå§‹åŒ–ç›¸åº”æ–‡ä»¶å¤¹åï¼Œä¼šç”Ÿæˆ`package.json`æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼ŒåŸºæœ¬éƒ½æ˜¯é»˜è®¤çš„ï¼Œè¿™ä¸ª`main`è¦æ³¨æ„ï¼Œè¿™é‡Œçš„`index.js`ä¸º`Hexo`ä½¿ç”¨è¯¥æ’ä»¶çš„æ—¶å€™å…¥å£è„šæœ¬ï¼Œæ‰€ä»¥æ’ä»¶ä¸­çš„ä¸»ç¨‹åºè¦å†™åœ¨è¯¥æ–‡ä»¶ä¸­ã€‚
```json
{
  "name": "hexo-plugins-test",
  "version": "0.0.0",
  "description": "æˆ‘çš„æ’ä»¶æµ‹è¯•ç¨‹åº",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "sumu",
  "license": "ISC"
}

```

#### 2.2Â åˆ›å»º`index.js`ä¸»ç¨‹åºæ–‡ä»¶å¹¶æ·»åŠ æµ‹è¯•ç¨‹åº

ç”±äºæ˜¯ä½¿ç”¨çš„`Vscode`è½¯ä»¶ä½œä¸ºç¼–ç¨‹ç¯å¢ƒï¼Œæ‰€ä»¥ç›´æ¥åˆ›å»ºè¯¥æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ç¨‹åºã€‚æ­¤æµ‹è¯•ç¨‹åºæ˜¯å°†é¼ æ ‡ç‚¹å‡»æ•ˆæœè„šæœ¬æ·»åŠ åˆ°äº†è¿‡æ»¤å™¨ä¸­ï¼Œåœ¨ç”Ÿæˆå™¨è§£æåæ‰§è¡Œè¯¥è„šæœ¬æ–‡ä»¶ï¼Œå‡ºç°çš„æ•ˆæœåº”è¯¥ä¸ºåœ¨ç”Ÿæˆå™¨è§£æååœ¨ç¼–ç¨‹ç¯å¢ƒçš„æ§åˆ¶å°è¾“å‡ºä¸€æ®µæµ‹è¯•ç¨‹åºåŠ è½½æˆåŠŸçš„æç¤ºï¼Œéšåé€šè¿‡å¯åŠ¨æœ¬åœ°é¢„è§ˆï¼Œåœ¨é‚£ä¸ªé¡µé¢ç‚¹å‡»éƒ½ä¼šæœ‰ç¤¼èŠ±ç‚¸å¼€çš„æ•ˆæœï¼Œå¹¶ä¸”é¡µé¢çš„æ§åˆ¶å°ä¹Ÿä¼šè¾“å‡ºä¸€ä¸ªæ•ˆæœåŠ è½½æˆåŠŸçš„æç¤ºã€‚

```JavaScript
hexo.extend.filter.register('after_generate', function() {
  console.log(`æµ‹è¯•ç¨‹åºåŠ è½½æˆåŠŸ(à¸…>Ï‰<*à¸…)`)
  var user_info_js = `
  <script>
    class Circle {
      constructor({ origin, speed, color, angle, context }) {
        this.origin = origin
        this.position = { ...this.origin }
        this.color = color
        this.speed = speed
        this.angle = angle
        this.context = context
        this.renderCount = 0
      }
    
      draw() {
        this.context.fillStyle = this.color
        this.context.beginPath()
        this.context.arc(this.position.x, this.position.y, 2, 0, Math.PI * 2)
        this.context.fill()
      }
    
      move() {
        this.position.x = (Math.sin(this.angle) * this.speed) + this.position.x
        this.position.y = (Math.cos(this.angle) * this.speed) + this.position.y + (this.renderCount * 0.3)
        this.renderCount++
      }
    }
    
    class Boom {
      constructor ({ origin, context, circleCount = 16, area }) {
        this.origin = origin
        this.context = context
        this.circleCount = circleCount
        this.area = area
        this.stop = false
        this.circles = []
      }
    
      randomArray(range) {
        const length = range.length
        const randomIndex = Math.floor(length * Math.random())
        return range[randomIndex]
      }
    
      randomColor() {
        const range = ['8', '9', 'A', 'B', 'C', 'D', 'E', 'F']
        return '#' + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range) + this.randomArray(range)
      }
    
      randomRange(start, end) {
        return (end - start) * Math.random() + start
      }
    
      init() {
        for(let i = 0; i < this.circleCount; i++) {
          const circle = new Circle({
            context: this.context,
            origin: this.origin,
            color: this.randomColor(),
            angle: this.randomRange(Math.PI - 1, Math.PI + 1),
            speed: this.randomRange(1, 6)
          })
          this.circles.push(circle)
        }
      }
    
      move() {
        this.circles.forEach((circle, index) => {
          if (circle.position.x > this.area.width || circle.position.y > this.area.height) {
            return this.circles.splice(index, 1)
          }
          circle.move()
        })
        if (this.circles.length == 0) {
          this.stop = true
        }
      }
    
      draw() {
        this.circles.forEach(circle => circle.draw())
      }
    }
    
    class CursorSpecialEffects {
      constructor() {
        this.computerCanvas = document.createElement('canvas')
        this.renderCanvas = document.createElement('canvas')
    
        this.computerContext = this.computerCanvas.getContext('2d')
        this.renderContext = this.renderCanvas.getContext('2d')
    
        this.globalWidth = window.innerWidth
        this.globalHeight = window.innerHeight
    
        this.booms = []
        this.running = false
      }
    
      handleMouseDown(e) {
        const boom = new Boom({
          origin: { x: e.clientX, y: e.clientY },
          context: this.computerContext,
          area: {
            width: this.globalWidth,
            height: this.globalHeight
          }
        })
        boom.init()
        this.booms.push(boom)
        this.running || this.run()
      }
    
      handlePageHide() {
        this.booms = []
        this.running = false
      }
    
      init() {
        const style = this.renderCanvas.style
        style.position = 'fixed'
        style.top = style.left = 0
        style.zIndex = '999999999999999999999999999999999999999999'
        style.pointerEvents = 'none'
    
        style.width = this.renderCanvas.width = this.computerCanvas.width = this.globalWidth
        style.height = this.renderCanvas.height = this.computerCanvas.height = this.globalHeight
    
        document.body.append(this.renderCanvas)
    
        window.addEventListener('mousedown', this.handleMouseDown.bind(this))
        window.addEventListener('pagehide', this.handlePageHide.bind(this))
      }
    
      run() {
        this.running = true
        if (this.booms.length == 0) {
          return this.running = false
        }
    
        requestAnimationFrame(this.run.bind(this))
    
        this.computerContext.clearRect(0, 0, this.globalWidth, this.globalHeight)
        this.renderContext.clearRect(0, 0, this.globalWidth, this.globalHeight)
    
        this.booms.forEach((boom, index) => {
          if (boom.stop) {
            return this.booms.splice(index, 1)
          }
          boom.move()
          boom.draw()
        })
        this.renderContext.drawImage(this.computerCanvas, 0, 0, this.globalWidth, this.globalHeight)
      }
    }
    
    const cursorSpecialEffects = new CursorSpecialEffects()
    cursorSpecialEffects.init()
    console.log('ç‚¹å‡»æ•ˆæœç¨‹åºåŠ è½½æˆåŠŸ(à¸…>Ï‰<*à¸…)')
  </script>
  `
  hexo.extend.injector.register('body_end', user_info_js, "default")

}, 98);
```
#### 2.3Â æ‰“åŒ…å¹¶å‘å¸ƒç¨‹åºåˆ°`npm`

è¿™ä¸ªå§ï¼Œè¦å…ˆçœ‹åè¾¹çš„ç¬”è®°ï¼Œäº†è§£ä¸€ä¸‹å¦‚ä½•åœ¨npmå‘å¸ƒç¨‹åºï¼Œåœ¨è¿™é‡Œç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚

```shell
# å‘å¸ƒç‰ˆæœ¬åˆ°npm
npm publish
```
å‡ºç°ä»¥ä¸‹æç¤ºä¿¡æ¯ä»£è¡¨å‘å¸ƒæˆåŠŸã€‚

```shell
npm notice 
npm notice package: hexo-plugins-test@0.0.0
npm notice === Tarball Contents ===
npm notice 5.5kB index.js
npm notice 244B  package.json
npm notice === Tarball Details ===
npm notice name:          hexo-plugins-test
npm notice version:       0.0.0
npm notice package size:  1.8 kB
npm notice unpacked size: 5.8 kB
npm notice shasum:        50ce71a91babf482f12b0f54a05a7ad48c3d8298
npm notice integrity:     sha512-EZwg7y6/fCmv/[...]oUQJ/Y0pKTR9g==
npm notice total files:   2
npm notice
+ hexo-plugins-test@0.0.0
```

#### 2.4Â è¿›å…¥æµ‹è¯•ç«™ç‚¹å¹¶å®‰è£…æ’ä»¶

```shell
# è¿›å…¥è‡ªå·±çš„ç«™ç‚¹æ ¹ç›®å½•ï¼ˆsiteä»£è¡¨ç«™ç‚¹æ ¹ç›®å½•ï¼‰
cd [site]/
# å®‰è£…æ’ä»¶
npm install hexo-plugins-test
```

è‹¥æ— æŠ¥é”™ï¼Œå³å¯è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œå¯åŠ¨æœ¬åœ°é¢„è§ˆï¼ŒæŸ¥çœ‹æ•ˆæœã€‚

#### 2.5Â å¯åŠ¨æœ¬åœ°é¢„è§ˆ

```shell
hexo cl && hexo g && hexo s
```