---
title: LV01-æˆ‘çš„ç¬¬ä¸€ä¸ªtsé¡¹ç›®
date: 2025-06-13 09:20:04
icon: famicons:logo-markdown
index: true
tags:
categories:
---

Helloï¼ŒWorldï¼å“ˆå“ˆå“ˆï¼Œè¿™é‡Œæ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªTypeScripté¡¹ç›®å·¥ç¨‹ã€‚

<!-- more -->

## ä¸€ã€å‰è¨€

### 1. å‚è€ƒé¡¹ç›®

#### 1.Â [jooy2/vitepress-sidebar](https://github.com/jooy2/vitepress-sidebar)

èµ·å› æ˜¯è‡ªå·±çœ‹åˆ°è¯´vitepressç”Ÿæˆé™æ€ç½‘é¡µæ›´å¿«ï¼Œæ‰€ä»¥å°±å»çœ‹äº†ï¼Œé»˜è®¤ä¸»é¢˜çœŸçš„å¥½ç®€æ´ï¼ŒæŒºå–œæ¬¢çš„ï¼Œä½†æ˜¯ï¼Œå°±æ˜¯å®ƒçš„æ’ä»¶å’Œä¸»é¢˜å¹¶ä¸åƒhexoã€vuepressé‚£ä¹ˆå¤šï¼Œå°±è¿ä¸€ä¸ªä¾§è¾¹æ éƒ½è¦è‡ªå·±æ‰‹å†™ï¼Œä¹‹ååœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰å¤§ä½¬å†™è„šæœ¬ç”Ÿæˆä¾§è¾¹æ ï¼Œç›´æ¥è§£å†³äº†è¿™ä¸ªç—›ç‚¹ï¼Œåæ¥çœ‹äº†ä¸‹å¤§æ¦‚çš„åŸç†ï¼Œå¤§æ¦‚å°±æ˜¯æ‰«ææŒ‡å®šç›®å½•ï¼Œè·å–ç›®å½•å’Œæ–‡ä»¶ï¼Œè¿‡æ»¤ä¸éœ€è¦çš„æ–‡ä»¶å’Œç›®å½•ï¼Œç„¶åæ’åºï¼Œæœ€åç”Ÿæˆç¬¦åˆvitepressä¾§è¾¹æ æ•°æ®ç±»å‹çš„å¯¹è±¡ï¼Œè¯´èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä¸€ä¸ªæåµŒå…¥å¼çš„äººæ¥è¯´ï¼Œå‰ç«¯å¤šå°‘æœ‰äº›éš¾åº¦äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æƒ³æŠ˜è…¾ä¸€æŠŠï¼Œå°±å½“å­¦ä¹ äº†ã€‚é¦–å…ˆå°±ä»Hello Worldå¼€å§‹å§ã€‚å…ˆçœ‹ä¸€ä¸‹è‡ªåŠ¨ä¾§è¾¹æ é‚£ä¸ªæ’ä»¶é¡¹ç›®ï¼š[GitHub - jooy2/vitepress-sidebar: ğŸ”Œ VitePress auto sidebar generator plugin. Easy to use and supports advanced customization.](https://github.com/jooy2/vitepress-sidebar)ï¼Œå®ƒçš„ä¸€çº§ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

<img src="./LV01-æˆ‘çš„ç¬¬ä¸€ä¸ªtsé¡¹ç›®/img/image-20250613093020357.png" alt="image-20250613093020357"  />

åƒé‡Œé¢çš„`.git`ã€`.github`ã€`.vscode`ç­‰ä¸€ä¸‹å¸¸ç”¨çš„ç›®å½•å’Œæ–‡ä»¶ä¸€çœ‹çŸ¥é“ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Œæ€ä¹ˆåˆ›å»ºçš„ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›æ–‡ä»¶ï¼Œä¹‹å‰æ˜¯æ²¡æ¥è§¦è¿‡çš„ï¼Œåé¢å°±æ¥ä¸€ä¸ªä¸€ä¸ªäº†è§£ã€‚

#### 2.Â [vuejs/vitepress](https://github.com/vuejs/vitepress)

[vuejs/vitepress](https://github.com/vuejs/vitepress)æ˜¯ Vite & VueåŠ¨åŠ›é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ã€‚ä¹Ÿæ˜¯ä¸€ä¸ªcliå·¥å…·ï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒã€‚

### 2. cliæ˜¯ä»€ä¹ˆï¼Ÿ

CLIï¼ˆcommand-line interfaceï¼Œå‘½ä»¤è¡Œç•Œé¢ï¼‰æ˜¯æŒ‡å¯åœ¨ç”¨æˆ·æç¤ºç¬¦ä¸‹é”®å…¥å¯æ‰§è¡ŒæŒ‡ä»¤çš„ç•Œé¢ï¼Œæ¯”å¦‚å‰ç«¯å¸¸ç”¨çš„è„šæ‰‹æ¶ï¼Œ[yo](https://yeoman.io/)ã€[vue cli](https://cli.vuejs.org/zh/guide/)ã€[react cli](https://github.com/facebook/create-react-app) ç­‰ã€‚å®ƒé€šå¸¸ä¸æ”¯æŒé¼ æ ‡ï¼Œç”¨æˆ·é€šè¿‡é”®ç›˜è¾“å…¥æŒ‡ä»¤ï¼Œè®¡ç®—æœºæ¥æ”¶åˆ°æŒ‡ä»¤åï¼Œäºˆä»¥æ‰§è¡Œã€‚åƒæˆ‘ä»¬å¹³å¸¸ç»å¸¸ä½¿ç”¨çš„ Git, npm ç­‰éƒ½æ˜¯CLIå·¥å…·ã€‚

å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰æ²¡æœ‰å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰é‚£ä¹ˆæ–¹ä¾¿ç”¨æˆ·æ“ä½œã€‚å› ä¸ºï¼Œå‘½ä»¤è¡Œç•Œé¢çš„è½¯ä»¶é€šå¸¸éœ€è¦ç”¨æˆ·è®°å¿†æ“ä½œçš„å‘½ä»¤ï¼Œä½†æ˜¯ï¼Œç”±äºå…¶æœ¬èº«çš„ç‰¹ç‚¹ï¼Œå‘½ä»¤è¡Œç•Œé¢è¦è¾ƒå›¾å½¢ç”¨æˆ·ç•Œé¢èŠ‚çº¦è®¡ç®—æœºç³»ç»Ÿçš„èµ„æºã€‚åœ¨ç†Ÿè®°å‘½ä»¤çš„å‰æä¸‹ï¼Œä½¿ç”¨å‘½ä»¤è¡Œç•Œé¢å¾€å¾€è¦è¾ƒä½¿ç”¨å›¾å½¢ç”¨æˆ·ç•Œé¢çš„æ“ä½œé€Ÿåº¦è¦å¿«ã€‚æ‰€ä»¥ï¼Œå›¾å½¢ç”¨æˆ·ç•Œé¢çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œéƒ½ä¿ç•™ç€å¯é€‰çš„å‘½ä»¤è¡Œç•Œé¢ã€‚


## äºŒã€Helloï¼ŒWorld!

### 1. npmé¡¹ç›®

#### 1. åˆå§‹åŒ–é¡¹ç›®

tsæ–‡ä»¶æœ€åè¦è¢«ç¼–è¯‘æˆjsæ–‡ä»¶ï¼Œæˆ‘ä»¬è¿è¡Œjsæ–‡ä»¶å¯ä»¥ç”¨nodejsï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªnpmé¡¹ç›®ï¼Œåé¢ä¹Ÿæ–¹ä¾¿ç®¡ç†è¦ç”¨åˆ°çš„ä¾èµ–åŒ…ã€‚æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
npm init -y # -yè¡¨ç¤ºå…¨éƒ¨æ‰§è¡Œé»˜è®¤æ“ä½œï¼Œä¹Ÿå¯ä»¥ä¸åŠ -yè¡¨ç¤ºäº¤äº’æ¨¡å¼
```

åç»­æ˜¯è¦å‘å¸ƒåˆ°npmçš„ï¼Œç”±äºå‰é¢å·²ç»äº†è§£è¿‡å‘½åç©ºé—´äº†ï¼Œæˆ‘ä»¬è¿™é‡Œç›´æ¥é€‰æ‹©å½“æ—¶åˆ›å»ºçš„ [docs-site](https://www.npmjs.com/org/docs-site) ç»„ç»‡ï¼Œé¡¹ç›®å‘½åä¸º [tdoc-cli](https://github.com/docs-site/tdoc-cli)ï¼Œæ‰€ä»¥ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ï¼š

```shell
npm init --scope=docs-site
```

ç„¶åè¾“å…¥ä¸€äº›å‚æ•°ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸‹é¢çš„`package.json`ï¼š

```json
{
  "name": "@docs-site/tdoc-cli",
  "version": "0.0.0",
  "description": "sumu's document processing cli tool. This is a TypeScript project.",
  "main": "src/index.ts",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/docs-site/tdoc-cli.git"
  },
  "keywords": [
    "TypeScript",
    "cli"
  ],
  "author": "sumu",
  "license": "ISC",
  "bugs": {
    "url": "https://github.com/docs-site/tdoc-cli/issues"
  },
  "homepage": "https://github.com/docs-site/tdoc-cli#readme"
}

```

#### 1.2 ç”Ÿæˆpackage-lock.json

ç„¶åæ‰§è¡Œä¸€ä¸‹ `npm install`ç”Ÿæˆä¸€ä¸‹package-lock.jsonæ–‡ä»¶ã€‚

```shell
npm install
```

#### 1.3 æ·»åŠ æ–‡æ¡£

ç„¶åå°±æ˜¯æ·»åŠ ä¸€ä¸ªREADME.mdæ–‡æ¡£ï¼Œè¿˜å¯ä»¥æ·»åŠ ä¸€äº›LICENSEã€CHANGELOG.mdè¿™äº›ç”¨äºå¯¹é¡¹ç›®çš„è¯´æ˜å’Œä¿®æ”¹è®°å½•çš„æ–‡æ¡£ã€‚

#### 1.4 åˆ›å»ºindex.ts

æˆ‘ä»¬æŠŠæºæ–‡ä»¶æ”¾åˆ°srcç›®å½•ä¸‹ï¼š

```shell
mkdir src
```

ç„¶ååˆ›å»ºindex.tsæ–‡ä»¶å³å¯ï¼Œåˆ›å»ºåè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š

```typescript
console.log("Hello, World!");
```

#### 1.5 é¡¹ç›®ç»“æ„

```shell
tdoc-cli
â”œâ”€â”€ .git
â”œâ”€â”€ .gitignore
â”œâ”€â”€ LICENSE
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â””â”€â”€ src
    â””â”€â”€ index.ts
```

### 2. ç¼–è¯‘ä¸è¿è¡Œ

> Tipsï¼šåé¢ä¼šç»å¸¸æåˆ°`npx` ï¼Œå®ƒæ˜¯ä¸€ç§å·¥å…·ï¼Œå¯è®©æˆ‘ä»¬è¿è¡Œ Node.js åŒ…è€Œæ— éœ€å…¨å±€å®‰è£…å®ƒä»¬ã€‚

#### 2.1Â åŸç”Ÿè¿è¡Œ TypeScript

> Tipsï¼š[Node.js ä¸­æ–‡ç½‘ â€” åŸç”Ÿè¿è¡Œ TypeScript](https://nodejs.cn/en/learn/typescript/run-natively)

è‡ª V22.6.0 ä»¥æ¥ï¼ŒNode.js é€šè¿‡ "ç±»å‹å‰¥ç¦»" ä¸ºæŸäº› TypeScript è¯­æ³•æä¾›äº†å®éªŒæ€§æ”¯æŒã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ Node.js ä¸­ç¼–å†™æœ‰æ•ˆçš„ TypeScript ä»£ç ï¼Œè€Œæ— éœ€å…ˆå¯¹å…¶è¿›è¡Œè½¬è¯‘ã€‚[`--experimental-strip-types`](https://nodejs.cn/docs/latest-v22.x/api/cli.html#--experimental-strip-types) æ ‡å¿—å‘Šè¯‰ Node.js åœ¨è¿è¡Œ TypeScript ä»£ç ä¹‹å‰ä»ä¸­å‰¥ç¦»ç±»å‹æ³¨é‡Šã€‚

```shell
node --experimental-strip-types src/index.ts
```

ç°åœ¨å¯ä»¥åœ¨ Node.js ä¸­ç›´æ¥è¿è¡Œ TypeScript ä»£ç ï¼Œè€Œæ— éœ€å…ˆå¯¹å…¶è¿›è¡Œè½¬è¯‘ï¼Œå¹¶ä½¿ç”¨ TypeScript æ•è·ä¸ç±»å‹ç›¸å…³çš„é”™è¯¯ã€‚ä½†æ˜¯å¥½åƒä¼šæŠ¥ä¸ªè­¦å‘Šï¼š

```shell
D:\sumu_blog\tdoc-cli [master +2 ~0 -0 !]> node --experimental-strip-types src/index.ts
Hello, World!
(node:18256) ExperimentalWarning: Type Stripping is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
```

#### 2.2 ä½¿ç”¨è¿è¡Œå™¨è¿è¡ŒTypeScript

> Tipsï¼š[Node.js ä¸­æ–‡ç½‘ â€” ä½¿ç”¨è¿è¡Œå™¨è¿è¡Œ TypeScript](https://nodejs.cn/en/learn/typescript/run)

å¦‚æœæƒ³è¦æ¯”å†…ç½®æ”¯æŒæ›´é«˜çº§çš„ TypeScript å¤„ç†ï¼ˆæˆ–è€…ä½¿ç”¨çš„æ˜¯ v22.7.0 ä¹‹å‰çš„ Node.jsï¼‰ï¼Œæˆ‘ä»¬æœ‰ 2 ä¸ªé€‰é¡¹ï¼šä½¿ç”¨è¿è¡Œå™¨ï¼ˆå®ƒå¯ä»¥ä¸ºæˆ‘ä»¬å¤„ç†å¤§éƒ¨åˆ†å¤æ‚æ€§ï¼‰ï¼Œæˆ–è€…é€šè¿‡ [transpilation](https://nodejs.cn/en/learn/typescript/transpile) è‡ªè¡Œå¤„ç†æ‰€æœ‰é—®é¢˜ã€‚

##### 2.2.1Â [`ts-node` ](https://nodejs.cn/en/learn/typescript/run#ä½¿ç”¨-ts-node-è¿è¡Œ-typescript-ä»£ç )

[ts-node](https://typestrong.org/ts-node/) æ˜¯ Node.js çš„ TypeScript æ‰§è¡Œç¯å¢ƒã€‚å®ƒå…è®¸æˆ‘ä»¬ç›´æ¥åœ¨ Node.js ä¸­è¿è¡Œ TypeScript ä»£ç ï¼Œè€Œæ— éœ€å…ˆç¼–è¯‘å®ƒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ`ts-node` æ‰§è¡Œç±»å‹æ£€æŸ¥ï¼Œé™¤éå¯ç”¨ `transpileOnly`ã€‚è™½ç„¶ `ts-node` å¯ä»¥åœ¨è¿è¡Œæ—¶æ•è·ç±»å‹é”™è¯¯ï¼Œä½†ä»å»ºè®®åœ¨å‘å¸ƒä»£ç ä¹‹å‰å…ˆä½¿ç”¨ `tsc` å¯¹å…¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚

è¦ä½¿ç”¨ `ts-node`ï¼Œéœ€è¦å…ˆå®‰è£…å®ƒï¼š

```bash
npm i -D ts-node
```

ç„¶åæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·è¿è¡Œ TypeScript ä»£ç ï¼š

```bash
npx ts-node src/index.ts
```

##### 2.2.2Â [`tsx` ](https://nodejs.cn/en/learn/typescript/run#ä½¿ç”¨-tsx-è¿è¡Œ-typescript-ä»£ç )

[tsx](https://tsx.is/) æ˜¯ Node.js çš„å¦ä¸€ä¸ª TypeScript æ‰§è¡Œç¯å¢ƒã€‚å®ƒå…è®¸æˆ‘ä»¬ç›´æ¥åœ¨ Node.js ä¸­è¿è¡Œ TypeScript ä»£ç ï¼Œè€Œæ— éœ€å…ˆç¼–è¯‘å®ƒã€‚ä½†è¯·æ³¨æ„ï¼Œå®ƒä¸ä¼šå¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®åœ¨äº¤ä»˜ä¹‹å‰å…ˆä½¿ç”¨ `tsc` å¯¹ä»£ç è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œç„¶åä½¿ç”¨ `tsx` è¿è¡Œå®ƒã€‚

è¦ä½¿ç”¨ `tsx`ï¼Œéœ€è¦å…ˆå®‰è£…å®ƒï¼š

```bash
npm i -D tsx
```

ç„¶åå¯ä»¥é€šè¿‡npxåƒè¿™æ ·è¿è¡Œ TypeScript ä»£ç ï¼š

```bash
npx tsx src/index.ts
```

ä¸æƒ³ä½¿ç”¨npxçš„è¯ï¼Œè¿˜å¯ä»¥é€šè¿‡ `node` ä½¿ç”¨ `tsx`ï¼Œå¯ä»¥é€šè¿‡ `--import` æ³¨å†Œ `tsx`ï¼š

```bash
node --import=tsx src/index.ts
```

#### 2.3 è½¬è¯‘è¿è¡ŒTypeScript

##### 2.3.1 `tsc`

> Tipsï¼š
>
> [Node.js ä¸­æ–‡ç½‘ â€” ä½¿ç”¨è½¬è¯‘è¿è¡Œ TypeScript ä»£ç ](https://nodejs.cn/en/learn/typescript/transpile)
>
> [TypeScript ä¸­æ–‡ç½‘: æ–‡æ¡£ - 5 åˆ†é’Ÿäº†è§£ TypeScript å·¥å…·](https://ts.nodejs.cn/docs/handbook/typescript-tooling-in-5-minutes.html)

è¿è¡Œ TypeScript ä»£ç çš„æœ€å¸¸è§æ–¹æ³•æ˜¯å…ˆå°†å…¶ç¼–è¯‘ä¸º JavaScriptã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ TypeScript ç¼–è¯‘å™¨ `tsc` æ‰§è¡Œæ­¤æ“ä½œã€‚å®ƒ æ˜¯ TypeScript çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒè´Ÿè´£å°† TypeScript ä»£ç ç¼–è¯‘æˆæ ‡å‡†çš„ JavaScript ä»£ç ã€‚

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç±»å‹æ£€æŸ¥æ˜¯ TypeScript çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œ`tsc` å¯ä»¥é€šè¿‡é™æ€åˆ†æä»£ç ï¼Œå¸®åŠ©å¼€å‘è€…å‘ç°æ½œåœ¨çš„é”™è¯¯ã€‚å¯ä»¥å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œä¸è¿‡åæ¥æ„Ÿè§‰ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å…¨å±€å®‰è£…ï¼š

```shell
npm install -D typescript # å±€éƒ¨å®‰è£…åˆ°å½“å‰é¡¹ç›®
npm install -g typescript # å…¨å±€å®‰è£…
```

##### 2.3.2 æ€ä¹ˆç¼–è¯‘ï¼Ÿ

å¦‚æœæ˜¯å±€éƒ¨å®‰è£…çš„tscå·¥å…·ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡npm runå‘½ä»¤æ¥å®ç°ï¼Œæˆ‘ä»¬åœ¨package.jsonæ·»åŠ è„šæœ¬ï¼š

```json
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "bin:b": "tsc src/index.ts --outDir dist"
  },
```

å…¶ä¸­`--outDir`å¯ä»¥æŒ‡å®šè¾“å‡ºç›®å½•ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
npm run bin:b
```

å¦‚æœæ˜¯å…¨å±€å®‰è£…çš„å“ˆï¼Œå°±å¯ä»¥ç›´æ¥æ‰§è¡Œï¼š

```shell
tsc src/index.ts --outDir dist
```

æˆ–è€…å°±æ˜¯ä½¿ç”¨npxï¼š

```shell
npx tsc src/index.ts --outDir dist
```

å°±ä¼šåœ¨distç›®å½•ä¸‹ç”Ÿæˆ index.js æ–‡ä»¶ã€‚

> Tipsï¼šç›¸å…³çš„ç¼–è¯‘é€‰é¡¹å¯ä»¥çœ‹è¿™é‡Œ [tsc CLI é€‰é¡¹ - TypeScript ä¸­æ–‡æ–‡æ¡£](https://nodejs.cn/typescript/project-config/compiler-options/#compiler-options)

##### 2.3.3 æ€ä¹ˆè¿è¡Œï¼Ÿ

ç”Ÿæˆindex.jsæ–‡ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡nodeå‘½ä»¤è¿è¡Œï¼š

```shell
node ./dist/index.js
```

ç„¶åå°±èƒ½çœ‹åˆ°æ‰“å°å‡ºäº†Hello, World!ã€‚

## ä¸‰ã€tdocå‘½ä»¤

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„tdocçš„å‘½ä»¤ï¼Œå½“æˆ‘ä»¬åœ¨cmdè¾“å…¥tdoc -vçš„æ—¶å€™å¯ä»¥æ‰“å°å‡ºpackage.jsonä¸­çš„ç‰ˆæœ¬å·ä»¥åŠä¾èµ–çš„ç‰ˆæœ¬å·ã€‚

### 1. `package.json`â€”â€”`bin`

å…ˆæ¥äº†è§£ä¸€ä¸‹ [package.json - bin](https://npm.nodejs.cn/cli/v11/configuring-npm/package-json#bin) ï¼Œè¿™ä¸ª bin å­—æ®µé€šå¸¸ç”¨äºåˆ›å»ºå…¨å±€å‘½ä»¤ã€‚è®¸å¤šåŒ…éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»–ä»¬å¸Œæœ›å°†å®ƒä»¬å®‰è£…åˆ° PATH ä¸­ã€‚npm ä½¿è¿™éå¸¸å®¹æ˜“ï¼ˆäº‹å®ä¸Šï¼Œå®ƒä½¿ç”¨æ­¤åŠŸèƒ½æ¥å®‰è£… "npm" å¯æ‰§è¡Œæ–‡ä»¶ã€‚ï¼‰

è¦ä½¿ç”¨å®ƒï¼Œéœ€è¦åœ¨ package.json ä¸­æä¾›ä¸€ä¸ª `bin` å­—æ®µï¼Œå®ƒæ˜¯å‘½ä»¤åç§°åˆ°æœ¬åœ°æ–‡ä»¶åçš„æ˜ å°„ã€‚å…¨å±€å®‰è£…æ­¤è½¯ä»¶åŒ…æ—¶ï¼Œè¯¥æ–‡ä»¶å°†é“¾æ¥åˆ°å…¨å±€ bins ç›®å½•ä¸­ï¼Œæˆ–è€…å°†åˆ›å»ºä¸€ä¸ª cmdï¼ˆWindows å‘½ä»¤æ–‡ä»¶ï¼‰æ¥æ‰§è¡Œ `bin` å­—æ®µä¸­çš„æŒ‡å®šæ–‡ä»¶ï¼Œå› æ­¤å®ƒå¯ä»¥ç”± `name` æˆ– `name.cmd` è¿è¡Œï¼ˆåœ¨ Windows PowerShell ä¸Šï¼‰ã€‚

å½“æ­¤åŒ…ä½œä¸ºä¾èµ–å®‰è£…åœ¨å¦ä¸€ä¸ªåŒ…ä¸­æ—¶ï¼Œè¯¥æ–‡ä»¶å°†è¢«é“¾æ¥åˆ°è¯¥åŒ…å¯ä»¥ç›´æ¥é€šè¿‡ `npm exec` æˆ–é€šè¿‡ `npm run` è°ƒç”¨å®ƒä»¬æ—¶åœ¨å…¶ä»–è„šæœ¬ä¸­çš„åç§°å¯ç”¨çš„ä½ç½®ã€‚

ä¾‹å¦‚ï¼Œ myapp å¯èƒ½æœ‰è¿™ä¸ªï¼š

```json
{
  "bin": {
    "myapp": "bin/cli.js"
  }
}
```

å› æ­¤ï¼Œå½“æˆ‘ä»¬å®‰è£… myapp æ—¶ï¼Œå¦‚æœæ˜¯ç±» unix çš„æ“ä½œç³»ç»Ÿï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªä» `cli.js` è„šæœ¬åˆ°`/usr/local/bin/myapp` çš„ç¬¦å·é“¾æ¥ï¼Œå¦‚æœæ˜¯ Windowsï¼Œå®ƒé€šå¸¸ä¼šåœ¨ `C:\Users\{Username}\AppData\Roaming\npm\myapp.cmd` åˆ›å»ºä¸€ä¸ªè¿è¡Œ `cli.js` è„šæœ¬çš„ cmd æ–‡ä»¶ã€‚

å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶ä¸”å®ƒçš„åç§°åº”è¯¥æ˜¯åŒ…çš„åç§°ï¼Œé‚£ä¹ˆå¯ä»¥å°†å…¶ä½œä¸ºå­—ç¬¦ä¸²æä¾›ã€‚ä¾‹å¦‚ï¼š

```json
{
  "name": "my-program",
  "version": "1.2.5",
  "bin": "path/to/program"
}
```

å°†ä¸æ­¤ç›¸åŒï¼š

```json
{
  "name": "my-program",
  "version": "1.2.5",
  "bin": {
    "my-program": "path/to/program"
  }
}
```

éœ€è¦æ³¨æ„ï¼Œè¯·ç¡®ä¿æˆ‘ä»¬åœ¨ `bin` ä¸­å¼•ç”¨çš„æ–‡ä»¶ä»¥ `#!/usr/bin/env node` å¼€å¤´ï¼Œå¦åˆ™è„šæœ¬å°†åœ¨æ²¡æœ‰ node å¯æ‰§è¡Œæ–‡ä»¶çš„æƒ…å†µä¸‹å¯åŠ¨ï¼

### 2. tdocå‘½ä»¤åˆ›å»º

#### 2.1 æ–°å¢binå±æ€§

æˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸‹ `package.json`ï¼š

```json
{
  "bin" : {
	"tdoc": "./dist/index.js"
  },
}
```

ç„¶ååœ¨`package.json`æ‰€åœ¨ç›®å½•ï¼Œé€šè¿‡ä¸‹é¢çš„å‘½ä»¤æœ¬åœ°å®‰è£…åˆ°å…¨å±€ï¼š

```shell
npm link
```

å°±ä¼šçœ‹åˆ°è¿™é‡Œå‡ºç°äº†æˆ‘ä»¬çš„tdocå‘½ä»¤ï¼š

<img src="./LV01-æˆ‘çš„ç¬¬ä¸€ä¸ªtsé¡¹ç›®/img/image-20250617164814952.png" />

æˆ‘ä»¬æ¥æ‰§è¡Œä¸€ä¸‹ï¼š

```shell
tdoc
```

ç„¶åå°±ä¼šæŠ¥é”™æˆ–è€…å¼¹å‡ºç”¨å…¶ä»–è½¯ä»¶æ‰“å¼€ä¹‹ç±»çš„å¼¹çª—ï¼š

<img src="./LV01-æˆ‘çš„ç¬¬ä¸€ä¸ªtsé¡¹ç›®/img/image-20250617165011899.png" />

#### 2.2 é—®é¢˜è§£å†³

å…¶å®ä¸Šé¢éƒ½è¯´äº†ï¼Œè¦ç¡®ä¿æˆ‘ä»¬åœ¨ `bin` ä¸­å¼•ç”¨çš„æ–‡ä»¶ä»¥ `#!/usr/bin/env node` å¼€å¤´ï¼Œå¦åˆ™è„šæœ¬å°†åœ¨æ²¡æœ‰ node å¯æ‰§è¡Œæ–‡ä»¶çš„æƒ…å†µä¸‹å¯åŠ¨ï¼ä½†æ˜¯æˆ‘ä»¬å¾—åˆ°çš„index.jsæ˜¯ç¼–è¯‘å‡ºæ¥çš„ï¼Œæˆ‘è¯•è¿‡å¯ä»¥ç›´æ¥æ·»åŠ åˆ°tsæ–‡ä»¶é‡Œï¼Œä½†æ˜¯æ„Ÿè§‰ä¹Ÿä¸æ˜¯å¾ˆåˆé€‚ã€‚é‚£æ€ä¹ˆåŠï¼Ÿ

å¯ä»¥å‚è€ƒä¸€ä¸‹[vuejs/vitepress](https://github.com/vuejs/vitepress/blob/main/package.json)ï¼Œè¿™ä¸ªé¡¹ç›®æ˜¯è¿™æ ·åšçš„ï¼Œæ¥çœ‹ä¸€ä¸‹`package.json`ï¼š

```json
"bin": {
    "vitepress": "bin/vitepress.js"
  },
```

é¡ºç€è¿™ä¸ªå†çœ‹ä¸€ä¸‹`bin/vitepress.js`ï¼š

```javascript
#!/usr/bin/env node
// @ts-check

import module from 'node:module'
//......
import('../dist/node/cli.js')
```

çœ‹åˆ°è¿™é‡Œå°±æ‡‚äº†ï¼Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªjsæ–‡ä»¶ï¼Œåœ¨é‡Œé¢å¯¼å…¥æˆ‘ä»¬å®é™…çš„jsæ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª`bin/tdoc-cli.js`æ–‡ä»¶ï¼š

```javascript
#!/usr/bin/env node
import('../dist/index.js');
```

ç„¶å`package.json`ä¿®æ”¹ä¸ºï¼š

```json
{
  "bin" : {
	"tdoc": "./bin/tdoc-cli.js"
  },
}
```

ç„¶åæˆ‘ä»¬é‡æ–°`npm link`ï¼Œç„¶åæ‰§è¡Œå°±æ²¡é—®é¢˜äº†ï¼š

![image-20250617165747874](./LV01-æˆ‘çš„ç¬¬ä¸€ä¸ªtsé¡¹ç›®/img/image-20250617165747874.png)

### 3. æ˜¾ç¤ºç‰ˆæœ¬

#### 3.1Â [tj/commander.js](https://github.com/tj/commander.js) 

æ¥ä¸‹æ¥å°±æ˜¯å®ç°`tdoc -v`æ˜¾ç¤ºç‰ˆæœ¬äº†ï¼Œè¿™ä¸ªéœ€è¦å¤„ç†å‘½ä»¤è¡Œå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [tj/commander.js](https://github.com/tj/commander.js) ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ [node.js](http://nodejs.org/) å‘½ä»¤è¡Œè§£å†³æ–¹æ¡ˆã€‚è¯´æ˜æ–‡æ¡£å¯ä»¥çœ‹è¿™é‡Œï¼š [å¼€å‘æ–‡æ¡£ | Commander ä¸­æ–‡ç½‘](https://commander.nodejs.cn/docs/)ï¼Œè¦æƒ³ä½¿ç”¨çš„è¯æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```shell
npm install -D commander
```

#### 3.2 index.ts

##### 3.2.1 åŠŸèƒ½å®ç°

æˆ‘ä»¬ä¿®æ”¹`index.ts`æ–‡ä»¶å¦‚ä¸‹ï¼š

```typescript
import { Command } from 'commander'
import pkg from '../package.json'

const program = new Command(pkg.name);

function getVersionInfo(): string {
  const depsInfo = Object.entries(pkg.devDependencies)
    .map(([name, version]) => `  ${name}: ${version}`)
    .join('\n');
  return `${pkg.name}: ${pkg.version}\n\ndevDependencies:\n${depsInfo}`;
}

program.version(
  getVersionInfo(),
  '-v, --version',
  'æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å’Œä¾èµ–åŒ…'
);

program.parse(); // å‚æ•°å¤„ç†

```

ç„¶åç¼–è¯‘ï¼Œä¼šç›´æ¥æŠ¥é”™ã€‚

##### 3.2.2 ç¼–è¯‘é—®é¢˜

- ï¼ˆ1ï¼‰ç¬¬ä¸€ä¸ªé—®é¢˜

å…ˆçœ‹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºåé¢çš„é—®é¢˜å¯èƒ½æ˜¯ç¬¬ä¸€ä¸ªé—®é¢˜å¼•èµ·çš„ï¼š

```shell
node_modules/commander/typings/index.d.ts:335:6 - error TS2583: Cannot find name 'Map'. Do you need to change your target library? Try changing the 'lib' compiler option to 'es2015' or later.

335   ): Map<string, T[]>;
```

TypeScript ç¼–è¯‘å™¨åœ¨å½“å‰çš„ç¼–è¯‘ç¯å¢ƒä¸­æ— æ³•è¯†åˆ« `Map` ç±»å‹ã€‚è¿™æ˜¯å› ä¸º `Map` æ˜¯ ES2015ï¼ˆä¹Ÿç§°ä¸º ES6ï¼‰ä¸­å¼•å…¥çš„å†…ç½®å¯¹è±¡ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œä¿®æ”¹ç¼–è¯‘å‘½ä»¤å¦‚ä¸‹ï¼š

```json
"bin:b": "tsc ./src/index.ts --outDir dist --lib esnext",
```

ä¸»è¦æ˜¯æ·»åŠ äº†[lib](https://www.typescriptlang.org/tsconfig/#lib)é€‰é¡¹ï¼Œè¿™é‡Œ**æ˜¾å¼æŒ‡å®š TypeScript ç¼–è¯‘å™¨ä½¿ç”¨å“ªäº›å†…ç½®åº“å£°æ˜æ–‡ä»¶**ï¼Œ`esnext` ä¹Ÿå¹¶ä¸æ˜¯æŸä¸ªå…·ä½“ ES ç‰ˆæœ¬ï¼ˆå¦‚ ES2025ï¼‰ï¼Œè€Œæ˜¯ **æµåŠ¨çš„æœ€æ–°æ ‡å‡†é›†åˆ**ã€‚

ï¼ˆ2ï¼‰ç¬¬äºŒä¸ªé—®é¢˜

ç„¶åé‡æ–°ç¼–è¯‘ï¼Œè¿˜æ˜¯æœ‰é—®é¢˜ï¼š

```shell
src/index.ts:12:17 - error TS2732: Cannot find module '../package.json'. Consider using '--resolveJsonModule' to import module with '.json' extension.

12 import pkg from '../package.json'
```

TypeScript ç¼–è¯‘å™¨æ— æ³•è§£æ JSON æ–‡ä»¶å¯¼å…¥ï¼Œæ ¹æœ¬åŸå› æ˜¯ **ç¼–è¯‘å™¨æœªå¯ç”¨ JSON æ¨¡å—è§£æåŠŸèƒ½**ã€‚å½“ä½ å°è¯•å¯¼å…¥ `package.json` è¿™ç±» JSON æ–‡ä»¶æ—¶ï¼š

```typescript
import pkg from '../package.json'
```

ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œå› ä¸ºé»˜è®¤é…ç½®ä¸‹ TypeScript ä¸å…è®¸ç›´æ¥å¯¼å…¥ JSON æ–‡ä»¶ã€‚è¿™ä¸ªæ—¶å€™TypeScript éœ€è¦æ˜¾å¼å¯ç”¨ `resolveJsonModule` é€‰é¡¹æ‰èƒ½è¯†åˆ« JSON å¯¼å…¥ï¼Œæˆ‘ä»¬ç»§ç»­ä¿®æ”¹ç¼–è¯‘å‘½ä»¤ï¼š

```json
"bin:b": "tsc ./src/index.ts --outDir dist --lib esnext --resolveJsonModule",
```

[resolveJsonModule](https://www.typescriptlang.org/tsconfig/#resolveJsonModule)å°±æ˜¯å¯ç”¨å¯¼å…¥ .json æ–‡ä»¶ã€‚

- ï¼ˆ3ï¼‰ç¬¬ä¸‰ä¸ªé—®é¢˜

ç„¶åæˆ‘ä»¬é‡æ–°ç¼–è¯‘ï¼Œç»§ç»­æŠ¥é”™ï¼š

```shell
src/index.ts:12:8 - error TS1259: Module '"D:/sumu_blog/tdoc-cli/package"' can only be default-imported using the 'esModuleInterop' flag

12 import pkg from '../package.json'
          ~~~

  package.json:1:1
    1 {
      ~
    This module is declared with 'export =', and can only be used with a default import when using the 'esModuleInterop' flag. 
```

è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºTypeScript ç¼–è¯‘å™¨æ‹’ç» JSON æ–‡ä»¶çš„é»˜è®¤å¯¼å…¥è¯­æ³•ï¼Œæ ¹æœ¬åŸå› æ˜¯ **CommonJS æ¨¡å—ä¸ ES æ¨¡å—çš„å¯¼å‡ºæœºåˆ¶å†²çª**ã€‚å½“å°è¯•ä½¿ç”¨ ES æ¨¡å—çš„é»˜è®¤å¯¼å…¥è¯­æ³•ï¼š

```ts
import pkg from '../package.json'  // é»˜è®¤å¯¼å…¥
```

å¯¼å…¥ä¸€ä¸ªæœ¬è´¨æ˜¯ CommonJS æ¨¡å—ï¼ˆä½¿ç”¨ `export =` è¯­æ³•ï¼‰çš„ JSON æ–‡ä»¶æ—¶ï¼Œéœ€è¦ç‰¹æ®Šå…¼å®¹å¤„ç†ã€‚

JSON æ–‡ä»¶è¢«è§£æä¸º CommonJS æ¨¡å—ï¼ˆä½¿ç”¨ `export =` å¯¼å‡ºï¼‰ï¼Œè€Œ ES æ¨¡å—çš„ `import from` è¯­æ³•æœŸæœ›é»˜è®¤å¯¼å‡ºï¼ˆ`export default`ï¼‰ï¼Œå‰é¢æˆ‘ä»¬é€šè¿‡ `resolveJsonModule` å¯¼å…¥çš„ JSON æ–‡ä»¶ä¼šè¢«ç‰¹æ®Šå¤„ç†ä¸º CommonJS æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ç¼–è¯‘å‘½ä»¤ï¼š

```json
"bin:b": "tsc ./src/index.ts --outDir dist --lib esnext --resolveJsonModule --esModuleInterop",
```

[esModuleInterop](https://www.typescriptlang.org/tsconfig/#esModuleInterop)é€‰é¡¹å¯ä»¥ç”Ÿæˆå…¼å®¹ä»£ç æ¥è½¬æ¢æ¨¡å—ç³»ç»Ÿå·®å¼‚ã€‚ç„¶åå†ç¼–è¯‘å°±æ²¡é—®é¢˜äº†ã€‚ æ¨¡å—ç³»ç»Ÿå·®å¼‚ç¤ºæ„å›¾ï¼š

![image details](./LV01-æˆ‘çš„ç¬¬ä¸€ä¸ªtsé¡¹ç›®/img/20250617192648.png)

##### 3.2.3 ç”Ÿæˆç›®å½•é—®é¢˜

å¢åŠ ç‰ˆæœ¬æ˜¾ç¤ºåŠŸèƒ½åï¼Œdistç›®å½•ç»“æ„å˜æˆè¿™æ ·äº†ï¼š

```shell
.
+--- package.json
+--- src
|   +--- index.js
```

æœäº†ä¸€ä¸‹ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºå¯ç”¨äº† `--resolveJsonModule` é€‰é¡¹ï¼Œè¿™ä¼šå¯¼è‡´ï¼š

ï¼ˆ1ï¼‰å¦‚æœ `index.ts` ä¸­å­˜åœ¨å¯¼å…¥ `package.json` çš„è¯­å¥ï¼ˆå¦‚ `import pkg from '../package.json'`ï¼‰

ï¼ˆ2ï¼‰TypeScript ä¼šè‡ªåŠ¨å°†å¼•ç”¨çš„ JSON æ–‡ä»¶å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ï¼ˆ`dist`ï¼‰ï¼Œå¹¶ä¿æŒç›¸å¯¹è·¯å¾„å…³ç³»ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `--rootDir` æŒ‡å®šæºæ–‡ä»¶æ ¹ç›®å½•ï¼š

```bash
tsc ./src/index.ts --outDir dist --rootDir ./src --lib esnext --resolveJsonModule --esModuleInterop
```

å…¶ä¸­`--rootDir ./src` æ˜¾å¼å£°æ˜æºæ–‡ä»¶æ ¹ç›®å½•ï¼Œè¾“å‡ºæ—¶è‡ªåŠ¨å‰¥ç¦» `src` è·¯å¾„å±‚çº§ã€‚ç„¶åé‡æ–°ç¼–è¯‘å°±å¯ä»¥äº†ã€‚

### 4.Â CommonJså’ŒEs Module

#### 4.1 è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

æ—©æœŸ`JavaScript`æ¨¡å—è¿™ä¸€æ¦‚å¿µï¼Œéƒ½æ˜¯é€šè¿‡`script`æ ‡ç­¾å¼•å…¥`js`æ–‡ä»¶ä»£ç ã€‚å½“ç„¶è¿™å†™åŸºæœ¬ç®€å•éœ€æ±‚æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†å½“æˆ‘ä»¬çš„é¡¹ç›®è¶Šæ¥è¶Šåºå¤§æ—¶ï¼Œæˆ‘ä»¬å¼•å…¥çš„`js`æ–‡ä»¶å°±ä¼šè¶Šå¤šï¼Œè¿™æ—¶å°±ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š

- jsæ–‡ä»¶ä½œç”¨åŸŸéƒ½æ˜¯é¡¶å±‚ï¼Œè¿™ä¼šé€ æˆå˜é‡æ±¡æŸ“
- jsæ–‡ä»¶å¤šï¼Œå˜å¾—ä¸å¥½ç»´æŠ¤
- jsæ–‡ä»¶ä¾èµ–é—®é¢˜ï¼Œç¨å¾®ä¸æ³¨æ„é¡ºåºå¼•å…¥é”™ï¼Œä»£ç å…¨æŠ¥é”™

ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜`JavaScript`ç¤¾åŒºå‡ºç°äº†`CommonJs`ï¼Œ`CommonJs`æ˜¯ä¸€ç§æ¨¡å—åŒ–çš„è§„èŒƒï¼ŒåŒ…æ‹¬ç°åœ¨çš„`NodeJs`é‡Œé¢ä¹Ÿé‡‡ç”¨äº†éƒ¨åˆ†`CommonJs`è¯­æ³•åœ¨é‡Œé¢ã€‚å®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

- è§£å†³å˜é‡æ±¡æŸ“é—®é¢˜ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä¸å­˜åœ¨å˜é‡æ±¡æŸ“
- è§£å†³ä»£ç ç»´æŠ¤é—®é¢˜ï¼Œä¸€ä¸ªæ–‡ä»¶é‡Œä»£ç éå¸¸æ¸…æ™°
- è§£å†³æ–‡ä»¶ä¾èµ–é—®é¢˜ï¼Œä¸€ä¸ªæ–‡ä»¶é‡Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ä¾èµ–äº†é‚£äº›å…¶å®ƒæ–‡ä»¶

ES æ¨¡å—ï¼Œä¹Ÿç§°ä¸º ECMAScript æ¨¡å—ï¼Œæ˜¯ JavaScript çš„åŸç”Ÿæ¨¡å—åŒ–æ ‡å‡†ï¼Œäº 2015 å¹´å¼•å…¥ã€‚ä¹Ÿå¯ä»¥è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚ç”±äºES æ¨¡å—æ˜¯ JavaScript çš„åŸç”Ÿæ¨¡å—åŒ–æ ‡å‡†ï¼Œæä¾›ä¸¥æ ¼çš„ä½œç”¨åŸŸéš”ç¦»å’Œé™æ€å¯¼å…¥ç­‰ç°ä»£åŠŸèƒ½ï¼Œæ‰€ä»¥ES æ¨¡å—ä¹Ÿä¼šæ›´å—é’çã€‚

#### 4.2 éƒ½æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ

##### 4.2.1Â CommonJS æ¨¡å—

CommonJS æ¨¡å—æ˜¯ä¸€ç§æµè¡Œçš„æ¨¡å—åŒ–æ ‡å‡†ï¼Œåœ¨ Node.js ä¸­å¹¿æ³›ä½¿ç”¨ã€‚å®ƒå…ˆäº ES æ¨¡å—å‡ºç°ï¼Œå¹¶æœ‰ç€è‡ªå·±ç‹¬ç‰¹çš„ç‰¹ç‚¹ï¼š

- **åŠ¨æ€åŠ è½½ï¼š** CommonJS æ¨¡å—é‡‡ç”¨ `require()` å‡½æ•°åŠ¨æ€åŠ è½½æ¨¡å—ï¼Œè¿™æ„å‘³ç€æ¨¡å—åœ¨è¿è¡Œæ—¶è¢«æŸ¥æ‰¾å’Œæ‰§è¡Œã€‚
- **å•ä¾‹ï¼š** æ¯ä¸€æ¬¡è°ƒç”¨ `require()` éƒ½ä¼šè¿”å›åŒä¸€æ¨¡å—å®ä¾‹ï¼Œå‘ˆç°å‡ºå•ä¾‹æ¨¡å¼ã€‚
- **å…¨å±€ä½œç”¨åŸŸï¼š** CommonJS æ¨¡å—åœ¨å…¨å±€ä½œç”¨åŸŸå†…è¿è¡Œï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å˜é‡å†²çªå’Œå‘½åç©ºé—´æ±¡æŸ“ã€‚

##### 4.2.2Â ES æ¨¡å—

- **é™æ€å¯¼å…¥ï¼š** ES æ¨¡å—åˆ©ç”¨ `import` è¯­å¥é™æ€å¯¼å…¥æ¨¡å—ï¼Œè¿™æ¶ˆé™¤äº†è¿è¡Œæ—¶æŸ¥æ‰¾æ¨¡å—çš„å¼€é”€ã€‚
- **ä¸¥æ ¼ä½œç”¨åŸŸéš”ç¦»ï¼š** æ¨¡å—ä¸­çš„å¯¼å…¥å’Œå¯¼å‡ºæ˜¯ä¸¥æ ¼ä½œç”¨åŸŸéš”ç¦»çš„ï¼Œé¿å…äº†å˜é‡å†²çªå’Œè€¦åˆé—®é¢˜ã€‚
- **Tree shakingï¼š** Tree shaking æ˜¯ ES æ¨¡å—çš„æ€æ‰‹é”ï¼Œå¯ä»¥ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ï¼Œä»è€Œä¼˜åŒ–ä»£ç åŒ…å¤§å°ã€‚

#### 4.3 ä»£ç ç¤ºä¾‹

ä¸ºäº†è¿›ä¸€æ­¥ç†è§£å·®å¼‚ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ ES æ¨¡å—å’Œ CommonJS æ¨¡å—çš„ä»£ç ç¤ºä¾‹ï¼š

**ES æ¨¡å—ï¼š**

```javascript
// foo.js
export const foo = 'bar';

// main.js
import { foo } from './foo.js';

console.log(foo); // è¾“å‡º: "bar"
```

**CommonJS æ¨¡å—ï¼š**

```javascript
// foo.js
module.exports = 'bar';

// main.js
const foo = require('./foo.js');

console.log(foo); // è¾“å‡º: "bar"
```

åœ¨ ES æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `export` å’Œ `import` è¯­å¥å¯¼å‡ºå’Œå¯¼å…¥æ¨¡å—ï¼Œè€Œ CommonJS æ¨¡å—ä¸­åˆ™ä½¿ç”¨ `module.exports` å’Œ `require()` å‡½æ•°ã€‚çœ‹åˆ°è¿™é‡Œï¼Œå¤§æ¦‚å°±å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆä¸Šé¢ç¼–è¯‘çš„æ—¶å€™è¦å¼€å¯esModuleInteropäº†ã€‚

## å››ã€tsé¡¹ç›®é…ç½®

æœ‰æ²¡æœ‰è§‰å¾—ä¸Šé¢çš„ç¼–è¯‘å‘½ä»¤è¶Šæ¥è¶Šé•¿äº†ï¼Ÿ

```json
"scripts": {
    "bin:b": "tsc ./src/index.ts --outDir dist --rootDir ./src --lib esnext --resolveJsonModule --esModuleInterop",
  },
```

èƒ½ä¸èƒ½æœ‰ä¸ªä¸“é—¨çš„æ–‡ä»¶æ¥é…ç½®ï¼Ÿå½“ç„¶å¯ä»¥å•¦ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ tsconfig.jsonæ–‡ä»¶ï¼Œå®ƒæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿè¿™é‡Œæˆ‘ä»¬å¯ä»¥å‚è€ƒï¼š[é¡¹ç›®é…ç½® - TypeScript ä¸­æ–‡æ–‡æ¡£](https://nodejs.cn/typescript/project-config/)

### 1.Â tsconfig.json

#### 1.1Â ä»€ä¹ˆæ˜¯ tsconfig.json

ç›®å½•ä¸­å­˜åœ¨ `tsconfig.json` æ–‡ä»¶è¡¨æ˜è¯¥ç›®å½•æ˜¯ TypeScript é¡¹ç›®çš„æ ¹ç›®å½•ã€‚`tsconfig.json` æ–‡ä»¶**æŒ‡å®šç¼–è¯‘é¡¹ç›®æ‰€éœ€çš„æ ¹æ–‡ä»¶å’Œç¼–è¯‘å™¨é€‰é¡¹**ã€‚å¯¹äºJavaScript é¡¹ç›®å¯ä»¥æ”¹ç”¨ `jsconfig.json` æ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨å‡ ä¹ç›¸åŒï¼Œä½†é»˜è®¤å¯ç”¨äº†ä¸€äº›ä¸ JavaScript ç›¸å…³çš„ç¼–è¯‘å™¨æ ‡å¿—ã€‚

é¡¹ç›®é€šè¿‡ä½¿ç”¨ tsconfig.json æˆ– jsconfig.jsonè¿›è¡Œç¼–è¯‘ï¼š

- é€šè¿‡åœ¨æ²¡æœ‰è¾“å…¥æ–‡ä»¶çš„æƒ…å†µä¸‹è°ƒç”¨ tscï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šä»å½“å‰ç›®å½•å¼€å§‹æœç´¢ `tsconfig.json` æ–‡ä»¶ï¼Œå¹¶ç»§ç»­æ²¿çˆ¶ç›®å½•é“¾å‘ä¸Šã€‚
- é€šè¿‡åœ¨æ²¡æœ‰è¾“å…¥æ–‡ä»¶å’Œ `--project`ï¼ˆæˆ–åªæ˜¯ `-p`ï¼‰å‘½ä»¤è¡Œé€‰é¡¹çš„æƒ…å†µä¸‹è°ƒç”¨ tscï¼Œè¯¥é€‰é¡¹æŒ‡å®šåŒ…å« `tsconfig.json` æ–‡ä»¶çš„ç›®å½•çš„è·¯å¾„ï¼Œæˆ–åŒ…å«é…ç½®çš„æœ‰æ•ˆ `.json` æ–‡ä»¶çš„è·¯å¾„ã€‚

åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šè¾“å…¥æ–‡ä»¶æ—¶ï¼Œ`tsconfig.json` æ–‡ä»¶å°†è¢«å¿½ç•¥ã€‚

#### 1.2 ä¸€èˆ¬æ ¼å¼

`tsconfig.json`æ–‡ä»¶çš„æ ¼å¼ï¼Œæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€ç®€å•çš„æƒ…å†µå¯ä»¥åªæ”¾ç½®ä¸€ä¸ªç©ºå¯¹è±¡`{}`ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚

```json
{
  "compilerOptions": {
    "outDir": "./dist",
    "allowJs": true,
    "target": "es5"
  },
  "include": ["./src/**/*"]
}
```

- `include`ï¼šæŒ‡å®šå“ªäº›æ–‡ä»¶éœ€è¦ç¼–è¯‘ã€‚
- `allowJs`ï¼šæŒ‡å®šæºç›®å½•çš„ JavaScript æ–‡ä»¶æ˜¯å¦åŸæ ·æ‹·è´åˆ°ç¼–è¯‘åçš„ç›®å½•ã€‚
- `outDir`ï¼šæŒ‡å®šç¼–è¯‘äº§ç‰©å­˜æ”¾çš„ç›®å½•ã€‚
- `target`ï¼šæŒ‡å®šç¼–è¯‘äº§ç‰©çš„ JS ç‰ˆæœ¬ã€‚

#### 1.3 æ€ä¹ˆç”Ÿæˆï¼Ÿ

`tsconfig.json`æ–‡ä»¶å¯ä»¥ä¸å¿…æ‰‹å†™ï¼Œä½¿ç”¨ tsc å‘½ä»¤çš„`--init`å‚æ•°è‡ªåŠ¨ç”Ÿæˆã€‚

```shell
tsc --init
```

é€šè¿‡å‘½ä»¤ç”Ÿæˆçš„`tsconfig.json`æ–‡ä»¶ï¼Œé‡Œé¢ä¼šæœ‰ä¸€äº›é»˜è®¤é…ç½®ã€‚é…ç½®å«ä¹‰æˆ‘ä»¬å¯ä»¥æŸ¥é˜…ï¼š[TypeScript: TSConfig å‚è€ƒ - æ‰€æœ‰ TSConfig é€‰é¡¹çš„æ–‡æ¡£](https://www.typescriptlang.org/zh/tsconfig/)

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«äººé¢„å…ˆå†™å¥½çš„ tsconfig.json æ–‡ä»¶ï¼Œnpm çš„`@tsconfig`åç§°ç©ºé—´ä¸‹é¢æœ‰å¾ˆå¤šæ¨¡å—ï¼Œéƒ½æ˜¯å†™å¥½çš„`tsconfig.json`æ ·æœ¬ï¼Œæ¯”å¦‚ `@tsconfig/recommended`å’Œ`@tsconfig/node16`ã€‚è¿™äº›æ¨¡å—éœ€è¦å®‰è£…ï¼Œä»¥`@tsconfig/deno`ä¸ºä¾‹ã€‚

```shell
npm install --save-dev @tsconfig/deno
```

å®‰è£…ä»¥åï¼Œå°±å¯ä»¥åœ¨`tsconfig.json`é‡Œé¢å¼•ç”¨è¿™ä¸ªæ¨¡å—ï¼Œç›¸å½“äºç»§æ‰¿å®ƒçš„è®¾ç½®ï¼Œç„¶åè¿›è¡Œæ‰©å±•ã€‚

### 2.Â tsconfig.prod.json

å½“è¿è¡Œ`tsc`å‘½ä»¤çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šä½¿ç”¨å½“å‰ç›®å½•ä¸‹çš„`tsconfig.json`æ–‡ä»¶ï¼Œä½†æ˜¯è¦æ˜¯æƒ³ç”¨å…¶ä»–çš„å°±å¯ä»¥é€šè¿‡`tsc`çš„`-p`æˆ–è€…`--project`å‚æ•°æ¥æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚æ‰€ä»¥è¿˜ä¼šçœ‹åˆ°æœ‰äº›é¡¹ç›®æœ‰ `tsconfig.prod.json`æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¯ä»¥ç”¨`extends`æ¥ç»§æ‰¿å¦ä¸€ä¸ªé…ç½®ï¼Œç„¶åè¦†ç›–æˆ–è€…æ·»åŠ é€‰é¡¹ï¼Œä¾‹å¦‚ï¼š

```json
{
  "extends": "./tsconfig.json",
  "exclude": ["test/**/*.test.ts", "docs-dist/*", "docs/.vitepress/*"]
}
```

extendsåé¢å°±æ˜¯è¦ç»§æ‰¿çš„æ–‡ä»¶ï¼Œexcludeå°±æ˜¯è¦æ’é™¤çš„ç›®å½•åŠæ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨`tsc -p`æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œé…ç½®æ–‡ä»¶å¿…é¡»æ˜¯è¦å­˜åœ¨çš„ï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚

### 3. ä½¿ç”¨å®ä¾‹

#### 3.1Â `tsconfig.json`

æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª `tsconfig.json` æ–‡ä»¶ï¼Œç›´æ¥é€šè¿‡`tsc init`ç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ï¼Œé»˜è®¤é…ç½®å¦‚ä¸‹ï¼š

```json
{
  "compilerOptions": {
    "target": "es2016",
    "module": "commonjs",
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "skipLibCheck": true
  }
}
```

ä½†æ˜¯é»˜è®¤çš„çš„è¯ï¼Œå¯¹vscodeæ¥è¯´ï¼Œè‡ªåŠ¨çš„è¯­æ³•æ£€æŸ¥ä¼šå…ˆæŒ‰ç…§è¿™ä¸ªæ–‡ä»¶è¿›è¡Œæ£€æŸ¥ï¼Œæ‰€ä»¥è¿™æ ·å°±å¯èƒ½æœ‰äº›é—®é¢˜ï¼Œä¸åœ¨æ„çš„è¯å¯ä»¥ä¸ç®¡ï¼Œæœ€åç¼–è¯‘æ²¡é—®é¢˜å°±è¡Œã€‚æˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ª`tsconfig.prod.json`ï¼š

```json
{
	"extends": "./tsconfig.json",      // ç»§æ‰¿åŸºç¡€é…ç½®
	"compilerOptions": {
		"target": "ES2020",              // ç¼–è¯‘ç›®æ ‡ESç‰ˆæœ¬
		"lib": ["esnext"],               // ä½¿ç”¨çš„åº“å£°æ˜
		"rootDir": "./src",              // æºä»£ç ç›®å½•
		"resolveJsonModule": true,       // å…è®¸å¯¼å…¥JSONæ¨¡å—
		"outDir": "./dist",              // è¾“å‡ºç›®å½•
		"sourceMap": false,              // ç”Ÿæˆsourcemapç”¨äºè°ƒè¯•
		"esModuleInterop": true,         // æ”¯æŒCommonJS/ESæ¨¡å—äº’æ“ä½œ
		"strict": true,                  // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥
	},
	"include": [                       // åŒ…å«çš„æ–‡ä»¶
		"src/**/*.ts"
	], 
	"exclude": [                       // æ’é™¤çš„æ–‡ä»¶
		"node_modules"
	] 
}
```

#### 3.2 `package.json`

ä¿®æ”¹`package.json`å¦‚ä¸‹ï¼š

```json
{
  //......
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "build": "tsc --project tsconfig.prod.json",
    "start": "node ./dist/index.js"
  },
  //......
}
```

#### 3.4 ç¼–è¯‘è¿è¡Œ

å’Œä¸Šé¢ä¸€æ ·ï¼Œæ‰§è¡Œ`npm run build`æˆ–è€…å…¨å±€å®‰è£…äº†`tsc`çš„è¯ï¼Œç›´æ¥æ‰§è¡Œ`tsc`ä¹Ÿè¡Œã€‚è¿è¡Œçš„è¯å°±æ˜¯`node ./dist/index.js`æˆ–è€…`npm run start`ã€‚

## äº”ã€Prettier - Code formatter

### 1. Prettier æ˜¯ä»€ä¹ˆï¼Ÿ

ç›´æ¥çœ‹å®˜ç½‘æŠŠï¼š[Prettier ä¸­æ–‡ç½‘ Â· Prettier æ˜¯ä¸€ä¸ªâ€œæœ‰æ€åº¦â€çš„ä»£ç æ ¼å¼åŒ–å·¥å…·](https://www.prettier.cn/)ï¼ŒPrettier æ˜¯ä¸€ç§å‰ç«¯ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œæ”¯æŒjavascriptã€jsxã€typescriptã€css,lesså’Œscssã€htmlã€vueã€angularã€jsonã€markdownç­‰å¤šç§å‰ç«¯æŠ€æœ¯è¯­è¨€æ ¼å¼åŒ–ã€‚

> Tipsï¼šè¿™é‡Œæœ‰ä¸€ä¸ªé…ç½®æ–‡æ¡£å¯ä»¥å‚è€ƒï¼š[ä»€ä¹ˆæ˜¯ Prettierï¼Ÿ Â· Prettier ä¸­æ–‡ç½‘](https://prettier.nodejs.cn/docs/)

### 2. VSCodeä¸­ä½¿ç”¨

æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨vscodeæ‰©å±•ä¸­æœç´¢å®‰è£…è¿™ä¸ªæ‰©å±•ï¼š

```txt
åç§°: Prettier - Code formatter
ID: esbenp.prettier-vscode
è¯´æ˜: Code formatter using prettier
ç‰ˆæœ¬: 11.0.0
å‘å¸ƒè€…: Prettier
VS Marketplace é“¾æ¥: https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode
```

æ€ä¹ˆé…ç½®ï¼Ÿæˆ‘ä»¬ç›´æ¥åœ¨å·¥ç¨‹ä¸­åˆ›å»º `.vscode`ç›®å½•ï¼Œç„¶ååˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼š

- `.vscode/extensions.json`ï¼šè¿™ä¸ªæ–‡ä»¶å¯ä»¥ç”¨äº**ç®¡ç†é¡¹ç›®æ¨èçš„æ‰©å±•æ’ä»¶**ã€‚å®ƒå¯ä»¥å¸®åŠ©å›¢é˜Ÿç»Ÿä¸€å¼€å‘ç¯å¢ƒï¼Œç¡®ä¿æ‰€æœ‰åä½œè€…ä½¿ç”¨ç›¸åŒçš„å·¥å…·é“¾ã€‚

```json
{
  "recommendations": ["esbenp.prettier-vscode"]
}
```

- `.vscode/settings.json`ï¼šè¿™ä¸ªé…ç½®æ–‡ä»¶é’ˆå¯¹å·¥ä½œåŒºç”Ÿæ•ˆã€‚

```json
{
  "files.autoSave": "afterDelay", // æ–‡ä»¶è‡ªåŠ¨ä¿å­˜
  "editor.formatOnSave": true, // ä¿å­˜æ—¶æ ¼å¼åŒ–ä»£ç 
  "editor.wordWrap": "on",
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "[javascript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "editor.tabSize": 2,        // jsonã€jsã€tsç­‰æ–‡ä»¶å¸¸è§çš„è¿˜æ˜¯2ä¸ªç©ºæ ¼
  "prettier.embeddedLanguageFormatting": "off",
  "prettier.enable": true
}
```

æˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºvscodeçš„ä»£ç æ ¼å¼åŒ–è§„åˆ™æ–‡ä»¶ï¼Œåœ¨å·¥ç¨‹ç›®å½•åˆ›å»ºå³å¯ï¼Œè¿™ä¸ªä¼šåœ¨åé¢è¯´æ˜ã€‚

### 3. é¡¹ç›®ä¸­ä½¿ç”¨

#### 3.1 prettierä¾èµ–åŒ…

å¦‚æœæƒ³åœ¨é¡¹ç›®ä¸­ä½¿ç”¨prettierï¼Œè¿™ç§æ–¹å¼å¯ä»¥ç›´æ¥æ ¼å¼åŒ–æ•´ä¸ªé¡¹ç›®æˆ–è€…æ˜¯æ•´ä¸ªç›®å½•ã€‚å»ºè®®é¡¹ç›®ä¸­ä¸€å®šè¦å®‰è£…prettierå’Œç»Ÿä¸€å¥½æ ¼å¼åŒ–è§„åˆ™ã€‚é¦–å…ˆä¸‹è½½prettierä¾èµ–ï¼Œä¸ºé¡¹ç›®æ·»åŠ æ ¼å¼åŒ–ä¾èµ–ã€‚ä¾‹å¦‚ï¼š

```shell
npm install --save-dev prettier
```

#### 3.2 æ£€æŸ¥ç›®å½•åŠå­ç›®å½•æ–‡ä»¶æ ¼å¼åŒ–æƒ…å†µ

æˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¯ä»¥æ£€æŸ¥æŒ‡å®šç›®å½•å’Œå­ç›®å½•çš„æ–‡ä»¶æ ¼å¼åŒ–æƒ…å†µï¼š

```shell
npx prettier . --check
```

npx éš npm æä¾›ï¼Œå¯ä»¥è®©æˆ‘ä»¬ç›´æ¥è¿è¡Œæœ¬åœ°å®‰è£…çš„å·¥å…·ã€‚åœ¨æ‰§è¡Œå‘½ä»¤å‰è®°å¾—å…ˆå®‰è£…prettierä¾èµ–åŒ…ï¼Œä¸ç„¶npxä¼šä¸‹è½½æœ€æ–°ç‰ˆçš„prettieræ ¼å¼åŒ–ä»£ç ã€‚åç»­å¯ä»¥åœ¨npmé¡¹ç›®çš„`package.json`ä¸­ç¼–å†™æ‰§è¡Œè„šæœ¬æ¥ä½¿ç”¨ã€‚æ‰§è¡Œåä¼šæœ‰ä»¥ä¸‹æ‰“å°ä¿¡æ¯ï¼Œè¿™é‡Œé¢å°±æ˜¯æ‰«æåˆ°çš„æ²¡æœ‰å¤„ç†è¿‡çš„æ–‡ä»¶ï¼š

```shell
D:\sumu_blog\ts-demo [master +2 ~2 -0 !]> npx prettier . --check
Checking formatting...
[warn] .prettierrc
[warn] .vscode/extensions.json
[warn] .vscode/settings.json
[warn] index.js
[warn] package-lock.json
[warn] package.json
[warn] src/index.ts
[warn] tsconfig.json
[warn] Code style issues found in 8 files. Run Prettier with --write to fix.
```

å¯ä»¥çœ‹åˆ°å®ƒæ‰«æäº†å¾ˆå¤šçš„æ–‡ä»¶ã€‚å…¶ä¸­`index.js`æ–‡ä»¶æ˜¯æˆ‘ä»¬ç”¨æ¥æµ‹è¯•çš„æ–‡ä»¶ã€‚

#### 3.3Â æ ¼å¼ç›®å½•åŠå­ç›®å½•ä¸‹çš„æ–‡ä»¶

æƒ³è¦æ ¼å¼åŒ–é‚£äº›æ–‡ä»¶ï¼Œå¯ä»¥æ‰§è¡Œï¼š

```shell
npx prettier . --write
npx prettier ./index.js --write
```

### 4. é…ç½®æ–‡ä»¶

æ€ä¹ˆè‡ªå®šä¹‰æ ¼å¼åŒ–é£æ ¼ï¼Ÿæˆ‘ä»¬éœ€è¦ä¸ºPrettierç¼–å†™é…ç½®æ–‡ä»¶ï¼Œæ¥è§„å®šæˆ‘ä»¬é¡¹ç›®ä»£ç çš„æ ¼å¼åŒ–é£æ ¼ï¼Œé…ç½®æ–‡ä»¶å†™æ³•æœ‰ç‚¹å¤šï¼Œæˆ‘è¿™é‡Œæ˜¯ç”¨ JSON ç¼–å†™ `.prettierrc` æ–‡ä»¶ï¼Œå½“å·¥ç¨‹ç›®å½•ä¸‹å­˜åœ¨æœ‰ `.prettierrc`  æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„é…ç½®æ¥æ ¼å¼åŒ–ï¼ŒåŒ…æ‹¬vscodeä¸­çš„æ’ä»¶ä¹Ÿæ˜¯ä½¿ç”¨çš„è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚

> å¤šç§é…ç½®æ–‡ä»¶é£æ ¼å¯å‚è€ƒï¼š[prettier-configuration File](https://www.prettier.cn/docs/configuration.html)æˆ–è€…[é…ç½®æ–‡ä»¶ Â· Prettier ä¸­æ–‡ç½‘](https://prettier.nodejs.cn/docs/configuration)

å¯ä»¥ç®€å•å…ˆå†™ä¸€ä¸ªï¼Œé»˜è®¤çš„tabé”®æ˜¯2ä¸ªç©ºæ ¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨`.prettierrc` ä¸­å®šä¹‰ä¸€ä¸ªæ¥åšæµ‹è¯•ï¼š

```json
{
  "tabWidth": 4
}
```

å…³äºæœ‰å“ªäº›é…ç½®é¡¹å¯ä»¥çœ‹è¿™é‡Œï¼š[é€‰é¡¹ Â· Prettier ä¸­æ–‡ç½‘](https://prettier.nodejs.cn/docs/options)ï¼Œè¿™é‡Œæ˜¯æˆ‘ç›®å‰åœ¨ç”¨çš„ï¼š

```json
{
  "tabWidth": 2,
  "singleQuote": true,
  "quoteProps": "as-needed",
  "trailingComma": "none",
  "bracketSpacing": true,
  "bracketSameLine": false,
  "arrowParens": "always",
  "insertPragma": false,
  "requirePragma": false,
  "proseWrap": "never",
  "htmlWhitespaceSensitivity": "strict",
  "endOfLine": "lf"
}
```

### 5. å¿½ç•¥æ–‡ä»¶

> Tipsï¼šå¯ä»¥å‚è€ƒ[å¿½ç•¥ä»£ç  Â· Prettier ä¸­æ–‡ç½‘](https://prettier.nodejs.cn/docs/ignore)

é»˜è®¤æƒ…å†µä¸‹ï¼Œprettier ä¼šå¿½ç•¥ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç›®å½•ï¼ˆ".git"ã€".jj"ã€".sl"ã€".svn" å’Œ ".hg"ï¼‰å’Œ `node_modules`ï¼ˆé™¤éæŒ‡å®šäº† [`--with-node-modules` CLI é€‰é¡¹](https://prettier.nodejs.cn/docs/cli#--with-node-modules)ï¼‰ä¸­çš„æ–‡ä»¶ã€‚å¦‚æœ ".gitignore" æ–‡ä»¶å­˜åœ¨äºè¿è¡Œå®ƒçš„åŒä¸€ç›®å½•ä¸­ï¼Œ**Prettier è¿˜å°†éµå¾ª ".gitignore" æ–‡ä»¶ä¸­æŒ‡å®šçš„è§„åˆ™**ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `.prettierignore` å®Œå…¨å¿½ç•¥ï¼ˆå³ä¸é‡æ–°æ ¼å¼åŒ–ï¼‰æŸäº›æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚`.prettierignore` ä½¿ç”¨ `.gitignore` è¯­æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹æ‰€ç¤ºçš„`.prettierignore`ï¼š

```txt
dist/

# IDEs
.idea/
.vscode/

# Project files

# For development
.gitignore
.prettierignore
.prettierrc
node_modules/

package.json
package-lock.json

tsconfig.json
```

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†æ£€æŸ¥ï¼Œå°±ä¼šæ’é™¤æ‰ä¸€äº›æ–‡ä»¶äº†ï¼š

```shell
Checking formatting...
[warn] index.js
[warn] src/index.ts
[warn] Code style issues found in 2 files. Run Prettier with --write to fix.
```

è¿™ä¸ªæ—¶å€™å‘ç°å°±åªèƒ½æ‰«æåˆ°2ä¸ªæ–‡ä»¶äº†ã€‚

## å…­ã€EditorConfig

### 1. ç®€ä»‹

è¦ä¸ºåœ¨ä»£ç åº“ä¸­å·¥ä½œçš„æ¯ä¸ªäººå¼ºåˆ¶å®æ–½ä¸€è‡´çš„ç¼–ç é£æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥å°† `.editorconfig` æ–‡ä»¶æ·»åŠ åˆ°è§£å†³æ–¹æ¡ˆæˆ–é¡¹ç›®ä¸­ã€‚ EditorConfig æ–‡ä»¶è®¾ç½®éµå¾ª [EditorConfig.org](https://editorconfig.org/) ç»´æŠ¤çš„æ–‡ä»¶æ ¼å¼è§„èŒƒã€‚è®¸å¤šä»£ç ç¼–è¾‘å™¨å’Œåº”ç”¨ç¨‹åºéƒ½æ”¯æŒ EditorConfig æ–‡ä»¶ï¼ŒåŒ…æ‹¬ Visual Studioï¼ŒVSCodeï¼Œè¿˜æœ‰VIMã€‚ æœ‰ä¸€äº›ideä¸éœ€è¦å®‰è£…æ’ä»¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæœ‰äº›åˆ™éœ€è¦å®‰è£…æ’ä»¶ï¼Œå…·ä½“çš„å¯ä»¥çœ‹å®˜ç½‘ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒEditorConfig æ–‡ä»¶çš„ä¼˜å…ˆçº§éƒ½è¦å¤§äºideçš„é…ç½®ã€‚

> Tipsï¼š[ä½¿ç”¨ EditorConfig å®šä¹‰ä¸€è‡´çš„ç¼–ç æ ·å¼ - Visual Studio (Windows) | Microsoft Learn](https://learn.microsoft.com/zh-cn/visualstudio/ide/create-portable-custom-editor-options?view=vs-2022)

### 2. åœ¨vscodeä¸­ä½¿ç”¨

vscodeéœ€è¦å®‰è£…æ’ä»¶ï¼š

```txt
åç§°: EditorConfig for VS Code
ID: EditorConfig.EditorConfig
è¯´æ˜: EditorConfig Support for Visual Studio Code
ç‰ˆæœ¬: 0.17.4
å‘å¸ƒè€…: EditorConfig
VS Marketplace é“¾æ¥: https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig
```

Githubä»“åº“æ˜¯è¿™ä¸ªï¼š[GitHub - editorconfig/editorconfig-vscode: EditorConfig extension for Visual Studio Code](https://github.com/editorconfig/editorconfig-vscode)

### 3. é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä¸º `.editorconfig`ï¼Œåœ¨å…¶ä¸­è®¾ç½®å¥½è¦éµå®ˆçš„ä»£ç è§„èŒƒï¼Œæ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå°±èƒ½å¤Ÿåœ¨å‡ ä¹æ‰€æœ‰çš„ä¸»æµ IDE å’Œç¼–è¾‘å™¨ä¸­å¤ç”¨äº†ï¼Œå¯ä»¥å°† .editorconfig æ–‡ä»¶ä¹Ÿæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œå°±ä¸éœ€è¦é’ˆå¯¹ä¸åŒ IDE å’Œç¼–è¾‘å™¨å†å•ç‹¬è¿›è¡Œè®¾ç½®äº†ã€‚åœ¨vscodeä¸­æ”¯æŒä»¥ä¸‹é…ç½®ï¼š

- `indent_style`
- `indent_size`
- `tab_width`
- `end_of_line` (on save)
- `insert_final_newline` (on save)
- `trim_trailing_whitespace` (on save)

ä¸€ä¸ªç¤ºä¾‹å¦‚ä¸‹ï¼š

```ini
# http://editorconfig.org
# è¡¨ç¤ºæ˜¯æœ€é¡¶å±‚çš„é…ç½®æ–‡ä»¶ï¼Œå‘ç°å€¼ä¸ºtrueæ—¶ï¼Œæ‰ä¼šåœæ­¢æŸ¥æ‰¾.editorconfigæ–‡ä»¶
root = true                  

# Unix-style newlines with a newline ending every file
[*]
# è®¾ç½®ç¼–ç æ ¼å¼ï¼Œå€¼ä¸ºlatin1ã€utf-8ã€utf-8-bomã€utf-16beå’Œutf-16le
charset = utf-8              
# è®¾ç½®æ¢è¡Œç¬¦ï¼Œå€¼ä¸º lfã€crå’Œcrlf
end_of_line = lf             
# å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™æ–‡ä»¶æœ€åä¸€è¡Œä¹Ÿä¼šç¡®ä¿ä»¥æ¢è¡Œç¬¦ç»“å°¾ï¼Œä¼šå¼ºåˆ¶æ¢è¡Œåˆ°ä¸‹ä¸€è¡Œ
insert_final_newline = true  

# ç”¨å¤§æ‹¬å·å±•å¼€ç¬¦å·åŒ¹é…å¤šä¸ªæ–‡ä»¶ï¼Œè®¾ç½®æ‰€æœ‰ä»¥ .js, .ts ç»“å°¾çš„æ–‡ä»¶
[*.{js,ts}]
indent_style = space
indent_size = 2

# Makefileä½¿ç”¨åˆ¶è¡¨ç¬¦(tab)ç¼©è¿›
[Makefile]
indent_style = tab
indent_size = 4
```

## ä¸ƒã€Terser å‹ç¼©ä¸æ··æ·†

### 1. å‹ç¼©å’Œæ··æ·†æ˜¯ä»€ä¹ˆï¼Ÿ

#### 1.1 ä¸ºä»€ä¹ˆè¦å‹ç¼©å’Œæ··æ·†ï¼Ÿ

äº†è§£ä¸€ä¸‹è¿™ä¸¤ä¸ªæ¦‚å¿µï¼š

- **å‹ç¼©**ï¼šåˆ é™¤ Javascript ä»£ç ä¸­æ‰€æœ‰æ³¨é‡Šã€è·³æ ¼ç¬¦å·ã€æ¢è¡Œç¬¦å·åŠæ— ç”¨çš„ç©ºæ ¼ï¼Œä»è€Œå‹ç¼© JS æ–‡ä»¶å¤§å°ã€‚
- **æ··æ·†**ï¼šç»è¿‡ç¼–ç å°†å˜é‡å’Œå‡½æ•°åŸå‘½åæ”¹ä¸ºæ¯«æ— æ„ä¹‰çš„å‘½åï¼Œä»¥é˜²æ­¢ä»–äººçª¥è§†å’Œçªƒå– Javascript æºä»£ç ã€‚

æ‰€ä»¥å°±å¾ˆæ¸…æ¥šäº†ï¼Œå°±æ˜¯ä¸ºäº†å‡å°ä½“ç§¯ï¼ŒåŠ å¿«è®¿é—®é€Ÿåº¦ï¼Œç½‘ç»œä¼ è¾“çš„æ—¶å€™ï¼Œä½“ç§¯æ›´å°çš„JSæ–‡ä»¶ä¼šå‡å°‘å¸¦å®½å ç”¨ï¼Œå¯¹äºç”¨æˆ·æ¥è¯´ä¹Ÿæ›´çœæµé‡ã€‚è¿˜å¯ä»¥é¿å…ä¸€äº›å®‰å…¨é—®é¢˜ã€‚

#### 1.2 æœ‰å“ªäº›å·¥å…·ï¼Ÿ

å‹ç¼©å’Œæ··æ·†å·¥å…·å°±å¤šäº†ï¼Œå¸¸ç”¨çš„æœ‰ï¼š

- UglifyJS

[UglifyJS](https://github.com/mishoo/UglifyJS)æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„JavaScriptå‹ç¼©å·¥å…·ï¼Œå¯ä»¥å°†JSæ–‡ä»¶æ··æ·†ã€å‹ç¼©ï¼Œå¹¶ä¸”æ”¯æŒ ES6+ è¯­æ³•ã€‚å®ƒå…·æœ‰æ¯”è¾ƒé«˜çš„å‹ç¼©ç‡å’Œé€Ÿåº¦ï¼Œæ˜¯å‰ç«¯å¼€å‘è€…ç»å¸¸ä½¿ç”¨çš„å·¥å…·ä¹‹ä¸€ã€‚ç„¶è€Œï¼ŒUglifyJSçš„å‹ç¼©æ•ˆæœå¯èƒ½ä¸å¦‚å…¶ä»–ä¸€äº›ç°ä»£å·¥å…·ã€‚

- Terser

[Terser](https://github.com/terser/terser)æ˜¯ECMAScriptç¼–è¯‘å™¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºJSå‹ç¼©å·¥å…·ä½¿ç”¨ã€‚ç›¸æ¯”äºUglifyJSï¼ŒTerseræ›´åŠ ç°ä»£ï¼Œæ”¯æŒES6+è¯­æ³•ï¼Œå¹¶ä¸”å…·æœ‰æ›´å¼ºçš„å‹ç¼©èƒ½åŠ›ã€‚Terserå¯ä»¥ç§»é™¤æ³¨é‡Šã€ç©ºæ ¼å’Œæœªä½¿ç”¨çš„ä»£ç ï¼ŒåŒæ—¶ä¿ç•™äº†å¯è¯»æ€§æ›´å¥½çš„å˜é‡åã€‚æ­¤å¤–ï¼ŒTerserè¿˜å¯ä»¥ä¸Webpackç­‰æ„å»ºå·¥å…·é›†æˆã€‚å®ƒæ˜¯UglifyJSçš„æ›¿ä»£å“ï¼Œå…·æœ‰æ›´å¥½çš„å‹ç¼©æ•ˆæœå’Œæ›´å¿«çš„å‹ç¼©é€Ÿåº¦ã€‚

- Closure Compiler

[Google Closure Compiler](https://github.com/google/closure-compiler)æ˜¯ç”±Googleå¼€å‘çš„JavaScriptå‹ç¼©å·¥å…·ï¼Œå…·æœ‰éå¸¸å¼ºå¤§çš„ä¼˜åŒ–èƒ½åŠ›ã€‚å®ƒå¯ä»¥åšæ›´å¤šçš„ä»£ç ä¼˜åŒ–ï¼ŒåŒ…æ‹¬å˜é‡é‡å‘½åã€æ­»ä»£ç ç§»é™¤ç­‰ï¼Œä»è€Œè¿›ä¸€æ­¥å‡å°JSæ–‡ä»¶çš„ä½“ç§¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒClosure Compileræ˜¯åŸºäºJavaå¼€å‘çš„ï¼Œå› æ­¤éœ€è¦å®‰è£…Javaç¯å¢ƒæ‰èƒ½ä½¿ç”¨ã€‚

### 2. Terser

#### 2.1 Terserç®€ä»‹

è¿™é‡Œæ¥å­¦ä¹ ä¸€ä¸‹Terserï¼ŒTerser æ˜¯ JavaScript ä»£ç çš„è¡Œä¸šæ ‡å‡†å‹ç¼©å™¨ã€‚å®ƒå‹ç¼©å˜é‡åç§°ã€åˆ é™¤ç©ºæ ¼å’Œæ³¨é‡Šã€å¹¶ä¸”åˆ é™¤æœªä½¿ç”¨çš„ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ [å‘½ä»¤è¡Œ](https://terser.nodejs.cn/docs/cli-usage) æˆ– [Node.JS API](https://terser.nodejs.cn/docs/api-reference) ä½¿ç”¨å®ƒã€‚ä½†æ˜¯ï¼Œå®ƒæ¯æ¬¡å¥½åƒåªèƒ½å¤„ç†ä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ— æ³•ç›´æ¥è¿›è¡Œå¤šä¸ªæ–‡ä»¶å¤„ç†ï¼Œéœ€è¦è‡ªå·±å¤„ç†ï¼Œè¿™æœ‰ä¸ªé¡¹ç›®å¯ä»¥å‚è€ƒï¼š[jooy2/terser-glob](https://github.com/jooy2/terser-glob)

> Tipsï¼š[Terser ä¸­æ–‡ç½‘](https://terser.nodejs.cn/)

#### 2.2Â terserä¾èµ–å®‰è£…

```shell
npm install --save-dev terser 
```

#### 2.3 åŸºæœ¬ç”¨æ³•

> Tipsï¼š[CLI ç”¨æ³• | Terser ä¸­æ–‡ç½‘](https://terser.nodejs.cn/docs/cli-usage/)

```shell
terser [input files] [options]
```

ä¾‹å¦‚æŠŠ index.js å‹ç¼©å¹¶è¾“å‡ºåˆ° output.min.jsï¼š

```shell
terser ./dist/index.js --compress --mangle --output ./dist/output.min.js
```

ç”±äºæ˜¯å±€éƒ¨å®‰è£…ï¼Œæ‰€ä»¥è¦æ”¾åœ¨package.jsonä¸­æ‰èƒ½ç”¨ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢å†è¯´ã€‚

### 3. æ€ä¹ˆé…ç½®Terser

> Tipsï¼š
>
> - [API å‚è€ƒ | Terser ä¸­æ–‡ç½‘](https://terser.nodejs.cn/docs/api-reference/#minify-options-structure)
> - [é€‰é¡¹ | Terser ä¸­æ–‡ç½‘](https://terser.nodejs.cn/docs/options/)

#### 3.1 é…ç½®æ–‡ä»¶ç±»å‹

Terser æ”¯æŒå°†é…ç½®é¡¹æ”¾åœ¨å•ç‹¬çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¾¿äºç®¡ç†ã€‚ä¹‹å‰çœ‹åˆ°Terser æ”¯æŒä¸¤ç§é…ç½®æ–‡ä»¶æ ¼å¼ï¼š**JavaScript æ–‡ä»¶ (`terser.config.js`)** å’Œ **JSON æ–‡ä»¶ (`terser.config.json`)**ï¼Œé¢ï¼Œä½†æ˜¯å§ï¼Œæˆ‘è‡ªå·±å°è¯•çš„æ—¶å€™ï¼Œjsæ–‡ä»¶ç–¯ç‹‚æŠ¥é”™ã€‚ç•™ä¸€ä¸ªé—®é¢˜åœ¨è¿™é‡Œå§ï¼Œåé¢ææ˜ç™½äº†å†è¯´ã€‚åœ¨å®˜ç½‘çš„æ–‡æ¡£ä¸­åˆçœ‹åˆ°ï¼š

<img src="./LV01-æˆ‘çš„ç¬¬ä¸€ä¸ªtsé¡¹ç›®/img/image-20250613233402965.png" alt="image-20250613233402965" />

è¿™é‡Œè²Œä¼¼åªå†™äº†JSONæ–‡ä»¶ï¼Œæ‰€ä»¥ï¼Œåé¢è¿˜æ˜¯ç”¨JSONæ–‡ä»¶é…ç½®å§ã€‚

##### 3.1.1Â terser.config.js

æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º terser.config.js çš„æ–‡ä»¶, å…·ä½“é…ç½®å¦‚ä¸‹:

```javascript
// terser.config.js
module.exports = {
  compress: {
    drop_console: true,   // å»é™¤console.*è¯­å¥
    drop_debugger: true,  // å»é™¤debuggerè¯­å¥
    passes: 2,            // å¤šæ¬¡å‹ç¼©è¿­ä»£ï¼Œæ•ˆæœæ›´æ˜æ˜¾
    unused: true,         // åˆ é™¤æœªä½¿ç”¨çš„ä»£ç 
    dead_code: true,      // åˆ é™¤æ— æ•ˆçš„ä»£ç åˆ†æ”¯
  },
  mangle: {
    toplevel: true,       // æ··æ·†é¡¶çº§å˜é‡å’Œå‡½æ•°å
    properties: false,    // é»˜è®¤ä¸æ··æ·†å±æ€§åï¼Œé¿å…ç ´åå¤–éƒ¨æ¥å£
  },
  output: {
    comments: false,      // åˆ é™¤æ‰€æœ‰æ³¨é‡Š
    beautify: false,      // ä¸è¿›è¡Œæ ¼å¼åŒ–æ’ç‰ˆï¼Œå‹ç¼©ä¸ºä¸€è¡Œ
  },
  sourceMap: {
    filename: "output.min.js",
    url: "output.min.js.map"
  }
};

```

ï¼ˆ1ï¼‰**æ”¯æŒåŠ¨æ€é€»è¾‘**ï¼ˆæ¡ä»¶åˆ¤æ–­ã€ç¯å¢ƒå˜é‡ç­‰ï¼‰

ï¼ˆ2ï¼‰**æ”¯æŒé JSON ç±»å‹**ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ã€å‡½æ•°ç­‰ï¼‰

ï¼ˆ3ï¼‰**å¯æ·»åŠ æ³¨é‡Š**è¯´æ˜é…ç½®é¡¹

ï¼ˆ4ï¼‰**å¿…é¡»é€šè¿‡ CommonJS å¯¼å‡º** (`module.exports`)

##### 3.1.2Â terser.config.json

```json
{
  "compress": {
    "drop_console": true,
    "drop_debugger": true,
    "passes": 2,
    "unused": true,
    "dead_code": true
  },
  "mangle": {
    "toplevel": true,
    "properties": false
  },
  "output": {
    "comments": false,
    "beautify": false
  },
  "sourceMap": {
    "filename": "output.min.js",
    "url": "output.min.js.map"
  }
}
```

ï¼ˆ1ï¼‰**çº¯é™æ€é…ç½®**ï¼ˆæ— é€»è¾‘ï¼‰

ï¼ˆ2ï¼‰**åªæ”¯æŒ JSON å…¼å®¹ç±»å‹**ï¼ˆå­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€æ•°ç»„ã€å¯¹è±¡ï¼‰

ï¼ˆ3ï¼‰**ä¸æ”¯æŒæ³¨é‡Š**ï¼ˆJSON æ ‡å‡†ä¸å…è®¸æ³¨é‡Šï¼‰

ï¼ˆ4ï¼‰ä¸¥æ ¼éµå¾ª JSON è¯­æ³•ï¼ˆåŒå¼•å·ã€æ— å°¾éšé€—å·ï¼‰

#### 3.2 å¸¸ç”¨é…ç½®é¡¹

- compress å‹ç¼©é€‰é¡¹

<table>
	<thead>
		<tr>
			<th align="center">é€‰é¡¹å</th>
			<th align="center">è¯´æ˜</th>
			<th align="center">æ¨èå€¼</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>drop_console</td>
			<td>ç§»é™¤æ‰€æœ‰console.*è¯­å¥</td>
			<td>true</td>
		</tr>
		<tr>
			<td>drop_debugger</td>
			<td>ç§»é™¤æ‰€æœ‰debuggerè¯­å¥</td>
			<td>true</td>
		</tr>
		<tr>
			<td>passes</td>
			<td>é‡å¤å‹ç¼©æ¬¡æ•°ï¼Œæ•°å€¼è¶Šé«˜æ•ˆæœè¶Šå¥½</td>
			<td>2~3</td>
		</tr>
		<tr>
			<td>unused</td>
			<td>åˆ é™¤æœªä½¿ç”¨çš„å˜é‡æˆ–å‡½æ•°</td>
			<td>true</td>
		</tr>
		<tr>
			<td>dead_code</td>
			<td>åˆ é™¤æ­»ä»£ç </td>
			<td>true</td>
		</tr>
	</tbody>
</table>

- mangle æ··æ·†é€‰é¡¹

<table>
	<thead>
		<tr>
			<th align="center">é€‰é¡¹å</th>
			<th align="center">è¯´æ˜</th>
			<th align="center">æ¨èå€¼</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>toplevel</td>
			<td>æ··æ·†é¡¶çº§å‡½æ•°å’Œå˜é‡å</td>
			<td>true</td>
		</tr>
		<tr>
			<td>properties</td>
			<td>æ˜¯å¦æ··æ·†å¯¹è±¡å±æ€§å</td>
			<td>falseï¼ˆæ…ç”¨ï¼‰</td>
		</tr>
		<tr>
			<td>reserved</td>
			<td>ä¸è¢«æ··æ·†çš„å˜é‡æˆ–å‡½æ•°åï¼ˆä¿ç•™å…³é”®å­—ï¼‰</td>
			<td>æŒ‰éœ€é…ç½®</td>
		</tr>
	</tbody>
</table>

- sourceMap æºç æ˜ å°„é€‰é¡¹ï¼ˆç”¨äºç”Ÿæˆ source map æ–‡ä»¶ï¼Œä¾¿äºè°ƒè¯•ï¼‰

<table>
	<thead>
		<tr>
			<th align="center">é€‰é¡¹å</th>
			<th align="center">è¯´æ˜</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>filename</td>
			<td>æŒ‡å®šè¾“å‡ºjsæ–‡ä»¶å</td>
		</tr>
		<tr>
			<td>url</td>
			<td>source map æ–‡ä»¶çš„åç§°</td>
		</tr>
	</tbody>
</table>

#### 3.3 æ€ä¹ˆä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Ÿ

terser.config.js å’Œ terser.config.json æ–‡ä»¶çš„ä½¿ç”¨æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼š

```shell
terser ./dist/index.js -o ./dist/output.min.js -c terser.config.js
terser ./dist/index.js -o ./dist/output.min.js -c terser.config.json
```

ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå¯ä»¥åœ¨é¡¹ç›®çš„ package.json ä¸­æ·»åŠ ä¸€ä¸ª npm scriptï¼š

```json
  "scripts": {
	// ......
    "minify": "terser ./dist/index.js -o ./dist/output.min.js --config-file terser.config.json",
    "minify:t": "node ./dist/output.min.js -v"
  },
```

ä½†æ˜¯ç”¨jsæ–‡ä»¶ä¼šæŠ¥é”™ï¼š

```shell
D:\sumu_blog\ts-demo [master â‰¡ +1 ~2 -0 !]> npm run minify

> ts-demo@1.0.0 minify
> terser ./dist/index.js -o ./dist/output.min.js --config-file terser.config.js

SyntaxError: Unexpected token 'm', "module.exp"... is not valid JSON
    at JSON.parse (<anonymous>)
    at run_cli (D:\sumu_blog\ts-demo\node_modules\terser\dist\bundle.min.js:32899:24)
```

å‰é¢å·²ç»è¯´äº†ï¼Œå®˜ç½‘çš„è¿™ä¸ªé…ç½®é¡¹ä¼¼ä¹ä¹Ÿå¹¶æ²¡æœ‰è¯´å¯ä»¥ç”¨jsæ–‡ä»¶ï¼Œè¿™é‡Œå…ˆè¿™ä¸ªæ ·å­å§ï¼Œåé¢å°±è¿˜æ˜¯ç”¨jsonæ–‡ä»¶äº†ã€‚

#### 3.4 ä½¿ç”¨demo

æˆ‘ä»¬ç”¨è¿™ä¸ªé…ç½®æ–‡ä»¶å°è¯•ä¸€ä¸‹ï¼š

```json
{
  "compress": {
    "drop_console": true,
    "drop_debugger": true,
    "passes": 2,
    "unused": true,
    "dead_code": true
  },
  "mangle": {
    "toplevel": true,
    "properties": false
  },
  "output": {
    "comments": false,
    "beautify": false
  },
  "sourceMap": {
  }
}
```

è¿™ä¸ªæ–‡ä»¶ä¼šç§»é™¤æ‰€æœ‰çš„`console.*`è¯­å¥ï¼Œæ‰€ä»¥æ‰§è¡Œå‹ç¼©åçš„æ–‡ä»¶çš„è¯ï¼ŒåŸæœ¬æ‰“å°çš„Hello,World!å°±ä¸ä¼šå†æ‰“å°äº†ï¼Œä¾‹å¦‚ä¸‹é¢çš„æ–‡ä»¶ï¼š

```javascript
"use strict";
/** =====================================================
 * Copyright Â© hk. 2022-2025. All rights reserved.
 * File name  : index.ts
 * Author     : è‹æœ¨
 * Date       : 2025-06-13
 * Version    :
 * Description:
 * ======================================================
 */
function testPrettier(input) {
    try {
        if (input > 0) {
            return 'Positive';
        }
        else if (input < 0) {
            throw new Error('Negative');
        }
        return 'Zero';
    }
    catch (err) {
        console.error(err);
        return 'Error';
    }
}
const message = 'Hello, World!';
console.log(message);
console.log(testPrettier(5));
```

å‹ç¼©åå°±æ˜¯ï¼š

```javascript
"use strict";function r(r){try{if(r>0)return"Positive";if(r<0)throw new Error("Negative");return"Zero"}catch(r){return"Error"}}const t="Hello, World!";
```

## å…«ã€ESLint 

### 1. ä»€ä¹ˆæ˜¯ESLintï¼Ÿ

[ESLint](https://zh-hans.eslint.org/) æ˜¯ä¸€ä¸ªæ ¹æ®æ–¹æ¡ˆè¯†åˆ«å¹¶æŠ¥å‘Š ECMAScript/JavaScript ä»£ç é—®é¢˜çš„å·¥å…·ï¼Œå…¶ç›®çš„æ˜¯ä½¿ä»£ç é£æ ¼æ›´åŠ ä¸€è‡´å¹¶é¿å…é”™è¯¯ã€‚åœ¨å¾ˆå¤šåœ°æ–¹å®ƒéƒ½ä¸ JSLint å’Œ JSHint ç±»ä¼¼ï¼Œé™¤äº†ï¼š

- ESLint ä½¿ç”¨ [Espree](https://github.com/eslint/espree) å¯¹ JavaScript è¿›è¡Œè§£æã€‚
- ESLint åœ¨ä»£ç ä¸­ä½¿ç”¨ AST è¯„ä¼°æ–¹æ¡ˆã€‚
- ESLint å®Œå…¨æ˜¯æ’ä»¶å¼çš„ï¼Œæ¯ä¸ªè§„åˆ™éƒ½æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œæ—¶ä¸­æ·»åŠ æ›´å¤šæ’ä»¶ã€‚

>Tipsï¼š
>
>- [Find and fix problems in your JavaScript code - ESLint - Pluggable JavaScript Linter](https://eslint.org/)
>
>- [æ£€æµ‹å¹¶ä¿®å¤ JavaScript ä»£ç ä¸­çš„é—®é¢˜ã€‚ - ESLint - æ’ä»¶åŒ–çš„ JavaScript ä»£ç æ£€æŸ¥å·¥å…·](https://zh-hans.eslint.org/)

### 2. é¡¹ç›®ä¸­å®‰è£…ESLintåŒ…

åœ¨é¡¹ç›®ä¸­å®‰è£… ESLint åŒ…ï¼Œè¿™ä¸ªä¾èµ–åŒ…æ˜¯eslintçš„æ ¸å¿ƒä»£ç ï¼š

```shell
npm i -D eslint
```

ä½†æ˜¯æˆ‘ä»¬ç°åœ¨ç”¨çš„æ˜¯Typescriptï¼Œè¿˜éœ€è¦å†å®‰è£…ä¸¤ä¸ªä¾èµ–åŒ…ï¼š

```shell
# @typescript-eslint/parserï¼šESLintçš„è§£æå™¨ï¼Œç”¨äºè§£ætypescriptï¼Œä»è€Œæ£€æŸ¥å’Œè§„èŒƒTypescriptä»£ç 
# @typescript-eslint/eslint-pluginï¼šè¿™æ˜¯ä¸€ä¸ªESLintæ’ä»¶ï¼ŒåŒ…å«äº†å„ç±»å®šä¹‰å¥½çš„æ£€æµ‹Typescriptä»£ç çš„è§„èŒƒ
npm i -D @typescript-eslint/parser @typescript-eslint/eslint-plugin
```

æˆ–è€…è¿™é‡Œä¹Ÿå¯ä»¥ä¸è£…ï¼Œåé¢åˆå§‹åŒ–çš„æ—¶å€™é€‰æ‹©å®Œä¸€äº›é…ç½®é¡¹åï¼Œä¼šæç¤ºå®‰è£…çš„ã€‚

### 3. é…ç½®æ–‡ä»¶

> å‚è€ƒèµ„æ–™ï¼š
>
> - [é…ç½®æ–‡ä»¶ - ESLint - æ’ä»¶åŒ–çš„ JavaScript ä»£ç æ£€æŸ¥å·¥å…·](https://zh-hans.eslint.org/docs/latest/use/configure/configuration-files#é…ç½®æ–‡ä»¶æ ¼å¼)
> - [ESLint ä½¿ç”¨æ•™ç¨‹ï¼ˆä¸€ï¼‰ï¼šä»é›¶é…ç½® ESLint_eslintæ•™ç¨‹-CSDNåšå®¢](https://blog.csdn.net/m0_37890289/article/details/143591974)
> - [åœ¨TSé¡¹ç›®ä¸­ï¼Œå¦‚ä½•ä¼˜é›…çš„ä½¿ç”¨ESLintå’ŒPrettieræ„å»ºä»£ç å·¥ä½œæµ-CSDNåšå®¢](https://blog.csdn.net/React_Community/article/details/123343586)

#### 3.1 åˆ›å»ºé…ç½®æ–‡ä»¶

æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨åˆå§‹åŒ–é…ç½®å‘å¯¼ï¼š

```shell
npx eslint --init
```

ç„¶åä¼šè¿›å…¥å‘½ä»¤è¡Œäº¤äº’æ­¥éª¤ï¼Œé€‰æ‹©é€‚åˆæˆ‘ä»¬å·¥ç¨‹çš„å‚æ•°å³å¯åˆ›å»ºå¯¹åº”çš„åˆå§‹é…ç½®æ–‡ä»¶ï¼š

```shell
D:\sumu_blog\ts-demo [master â‰¡ +1 ~2 -0 !]> npx eslint --init
You can also run this command directly using 'npm init @eslint/config@latest'.

> ts-demo@1.0.0 npx
> create-config

@eslint/create-config: v1.9.0

âˆš What do you want to lint? Â· javascript
âˆš How would you like to use ESLint? Â· problems
âˆš What type of modules does your project use? Â· esm
âˆš Which framework does your project use? Â· none
âˆš Does your project use TypeScript? Â· no / yes
âˆš Where does your code run? Â· node
The config that you've selected requires the following dependencies:

eslint, @eslint/js, globals, typescript-eslint
âˆš Would you like to install them now? Â· No / Yes
âˆš Which package manager do you want to use? Â· npm
â˜•ï¸Installing...

up to date, audited 135 packages in 2s

40 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
Successfully created D:\sumu_blog\ts-demo\eslint.config.mjs file.
```

è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šæç¤ºæˆ‘ä»¬éœ€è¦é‚£äº›ä¾èµ–ï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©yesè¿›è¡Œå®‰è£…ã€‚ç„¶åå°±ä¼šåˆ›å»ºä¸€ä¸ªåˆå§‹çš„ç”¨äºTypescriptå·¥ç¨‹ï¼ˆä¸Šé¢é€‰åˆ™çš„è¿™ä¸ªï¼‰çš„é…ç½®æ–‡ä»¶ï¼š

```javascript
import js from '@eslint/js';
import globals from 'globals';
import tseslint from 'typescript-eslint';
import { defineConfig } from 'eslint/config';

export default defineConfig([
  {
    files: ['**/*.{js,mjs,cjs,ts,mts,cts}'],
    plugins: { js },
    extends: ['js/recommended']
  },
  {
    files: ['**/*.{js,mjs,cjs,ts,mts,cts}'],
    languageOptions: { globals: globals.node }
  },
  tseslint.configs.recommended
]);

```

#### 3.2 å¸¸ç”¨è§„åˆ™é…ç½®

> Tipsï¼š
>
> - [é…ç½®è§„åˆ™ - ESLint - æ’ä»¶åŒ–çš„ JavaScript ä»£ç æ£€æŸ¥å·¥å…·](https://zh-hans.eslint.org/docs/latest/use/configure/rules)
>
> - [è§„åˆ™å‚è€ƒ - ESLint - æ’ä»¶åŒ–çš„ JavaScript ä»£ç æ£€æŸ¥å·¥å…·](https://zh-hans.eslint.org/docs/latest/rules/)

ï¼ˆ1ï¼‰[semi](https://zh-hans.eslint.org/docs/latest/rules/semi)ï¼šè¿™ä¸€è§„åˆ™æ§åˆ¶ä»£ç ä¸­æ˜¯å¦éœ€è¦åˆ†å·ã€‚é€‰é¡¹ always è¡¨ç¤ºæ€»æ˜¯éœ€è¦åˆ†å·ï¼Œnever è¡¨ç¤ºä»ä¸ä½¿ç”¨åˆ†å·ã€‚

ï¼ˆ2ï¼‰[indent](https://zh-hans.eslint.org/docs/latest/rules/indent)ï¼šä¸€è§„åˆ™æ§åˆ¶ä»£ç çš„ç¼©è¿›æ–¹å¼ã€‚é€‰é¡¹ 2 è¡¨ç¤ºä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼ç¼©è¿›ï¼Œ4 è¡¨ç¤ºä½¿ç”¨å››ä¸ªç©ºæ ¼ã€‚

#### 3.3 ä¸€ä¸ªç®€å•çš„é…ç½®è§„åˆ™

```typescript
import js from '@eslint/js';
import globals from 'globals';
import tseslint from 'typescript-eslint';
import { defineConfig } from 'eslint/config';

export default defineConfig([
  // é…ç½®å¯¹è±¡ 1: åŸºç¡€è§„åˆ™é›†
  {
    files: ['**/*.{js,mjs,cjs,ts,mts,cts}'],
    plugins: { js },
    extends: ['js/recommended']
  },
  // é…ç½®å¯¹è±¡ 2: ç¯å¢ƒé…ç½®
  {
    files: ['**/*.{js,mjs,cjs,ts,mts,cts}'],
    languageOptions: { globals: globals.node }
  },
  // é…ç½®å¯¹è±¡ 3: TypeScriptæ”¯æŒ
  tseslint.configs.recommended,
  // é…ç½®å¯¹è±¡ 4: è‡ªå®šä¹‰è§„åˆ™è¦†ç›–
  {
    files: ['**/*.{js,mjs,cjs,ts,mts,cts}'],
    rules: {
      semi: ['error', 'always'], // å¼ºåˆ¶ä½¿ç”¨åˆ†å·
      indent: ['error', 2] // å¼ºåˆ¶ä½¿ç”¨2ä¸ªç©ºæ ¼ç¼©è¿›
    }
  }
]);

```

ä¸ºä»€ä¹ˆä½¿ç”¨å¤šä¸ªç‹¬ç«‹é…ç½®å¯¹è±¡ï¼Ÿ

ï¼ˆ1ï¼‰**èŒè´£åˆ†ç¦»åŸåˆ™**ï¼šæ¯ä¸ªé…ç½®å¯¹è±¡è´Ÿè´£å•ä¸€åŠŸèƒ½ã€‚

ï¼ˆ2ï¼‰**æ–‡ä»¶ä½œç”¨åŸŸæ§åˆ¶**ï¼šæ¯ä¸ªé…ç½®å¯¹è±¡å¯ç‹¬ç«‹æ§åˆ¶åº”ç”¨èŒƒå›´ï¼Œå¯ä¸ºä¸åŒæ–‡ä»¶ç±»å‹è®¾ç½®ä¸åŒè§„åˆ™ï¼ˆå¦‚å•ç‹¬é…ç½®æµ‹è¯•æ–‡ä»¶ï¼‰ã€‚

ï¼ˆ3ï¼‰**é…ç½®åˆå¹¶æœºåˆ¶**ï¼šESLint ä¼š**æ·±åº¦åˆå¹¶**æ•°ç»„ä¸­çš„é…ç½®å¯¹è±¡ï¼Œåé¢çš„é…ç½®ä¼šè¦†ç›–å‰é¢çš„åŒåè®¾ç½®ã€‚

ï¼ˆ4ï¼‰**æ¨¡å—åŒ–è®¾è®¡**ï¼šå¯ç›´æ¥å¯¼å…¥å¤–éƒ¨é…ç½®ï¼ˆå¦‚ `tseslint.configs.recommended`ï¼‰ï¼Œä¿æŒé…ç½®å¯å¤ç”¨æ€§ã€‚

ï¼ˆ5ï¼‰**ç±»å‹å®‰å…¨**ï¼šæ¯ä¸ªé…ç½®å¯¹è±¡æœ‰æ˜ç¡®çš„ç±»å‹å®šä¹‰ï¼Œé¿å…å•ä¸€å·¨å¤§å¯¹è±¡å¯¼è‡´çš„é…ç½®æ··ä¹±ã€‚

#### 3.4 ä½¿ç”¨é…ç½®æ–‡ä»¶

æˆ‘ä»¬å¯ä»¥å®šä¹‰å¦‚ä¸‹å‘½ä»¤ï¼š

```json
  "scripts": {
    //......
    "eslint:fix": "eslint --fix -c eslint.config.mjs ./src/index.ts"
  },
```

ç„¶åæ‰§è¡Œ `npm run eslint:fix`å³å¯æŒ‰ç…§å®šä¹‰çš„è§„åˆ™å¤„ç†ä»£ç ã€‚

### 4. ä¸ prettier ç»“åˆï¼Ÿ

è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸Šé¢eslintä¸­æœ‰æ§åˆ¶ç¼©è¿›çš„å‚æ•°ï¼Œå‡è®¾æˆ‘ä»¬é…ç½®ä¸º4ï¼Œä½†æ˜¯prettierä¸­é…ç½®ä¸º2ï¼Œå½“æˆ‘ä»¬æ ¼å¼åŒ–å®Œä»£ç ï¼Œå†ä½¿ç”¨eslintæ¥å¤„ç†ï¼Œæˆ‘ä»¬çš„ä»£ç ç¼©è¿›åˆä¼šå˜æˆ4ä¸ªç©ºæ ¼ï¼Œè¿™æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬è¦æ˜ç¡®è¿™ä¸¤ä¸ªå·¥å…·æœ‰ä»€ä¹ˆç”¨ï¼š

- eslintä¸­åŒ…å«ä¸‰ç±»è§„åˆ™ï¼šä»£ç è´¨é‡æ£€æŸ¥ã€ä»£ç é”™è¯¯æ£€æŸ¥ã€ä»£ç é£æ ¼æ£€æŸ¥
- prettieråŒ…å«ï¼šä»£ç é£æ ¼æ£€æŸ¥

eslintçš„ä»£ç æ ¼å¼åšçš„ä¸å¤Ÿå½»åº•ï¼Œéœ€è¦prettierè¿›è¡Œå¢å¼ºã€‚å¹¶ä¸”prettieræ”¯æŒæ›´å¤šçš„æ–‡ä»¶æ ¼å¼çš„æ ¼å¼åŒ–ã€‚ä½†æ˜¯å®ƒä»¬ä»£ç é£æ ¼éƒ¨åˆ†ä¼šå†²çªï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹å†²çªéƒ¨åˆ†è¿›è¡Œå¤„ç†äº†ã€‚è¿™é‡Œæˆ‘ä»¬å®‰è£…ä¸¤ä¸ªä¾èµ–ï¼š

```shell
npm i -D eslint-config-prettier eslint-plugin-prettier
```

- [prettier/eslint-config-prettier](https://github.com/prettier/eslint-config-prettier)ï¼šè§£å†³ESLintä¸­çš„æ ·å¼è§„èŒƒå’Œprettierä¸­æ ·å¼è§„èŒƒçš„å†²çªï¼Œä»¥prettierçš„æ ·å¼è§„èŒƒä¸ºå‡†ï¼Œä½¿ESLintä¸­çš„æ ·å¼è§„èŒƒè‡ªåŠ¨å¤±æ•ˆ
- [prettier/eslint-plugin-prettier](https://github.com/prettier/eslint-plugin-prettier)ï¼šå°† Prettier çš„è§„åˆ™é›†æˆåˆ° ESLint ä¸­ï¼Œé€šè¿‡ ESLint æ£€æŸ¥ Prettier æ ¼å¼é—®é¢˜ã€‚

æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„eslint.config.mjsï¼š

```javascript
import js from '@eslint/js';
import globals from 'globals';
import tseslint from 'typescript-eslint';
import { defineConfig } from 'eslint/config';

import eslintConfigPrettier from "eslint-config-prettier/flat";
import eslintPluginPrettierRecommended from 'eslint-plugin-prettier/recommended';

export default defineConfig([
  // é…ç½®å¯¹è±¡ 1: åŸºç¡€è§„åˆ™é›†
  {
    files: ['**/*.{js,mjs,cjs,ts,mts,cts}'],
    plugins: { js },
    extends: ['js/recommended']
  },
  // é…ç½®å¯¹è±¡ 2: ç¯å¢ƒé…ç½®
  {
    files: ['**/*.{js,mjs,cjs,ts,mts,cts}'],
    languageOptions: { globals: globals.node }
  },
  // é…ç½®å¯¹è±¡ 3: TypeScriptæ”¯æŒ
  tseslint.configs.recommended,
  // é…ç½®å¯¹è±¡ 4: è‡ªå®šä¹‰è§„åˆ™è¦†ç›– (ç§»é™¤äº†ä¸ Prettier å†²çªçš„æ ¼å¼åŒ–è§„åˆ™)
  {
    files: ['**/*.{js,mjs,cjs,ts,mts,cts}'],
		rules: {
      semi: ['error', 'always'], // å¼ºåˆ¶ä½¿ç”¨åˆ†å·
      indent: ['error', 4] // å¼ºåˆ¶ä½¿ç”¨2ä¸ªç©ºæ ¼ç¼©è¿›
    }
  },
  // é…ç½®å¯¹è±¡ 5: ç¦ç”¨ä¸ Prettier å†²çªçš„è§„åˆ™
  eslintConfigPrettier,
  // é…ç½®å¯¹è±¡ 6: Prettier é›†æˆ - ä½¿ç”¨ Prettier è§„åˆ™å¹¶è¦†ç›–å…¶ä»–æ ¼å¼åŒ–è§„åˆ™
  eslintPluginPrettierRecommended,
]);
```

è¿™é‡Œå°†indenté…ç½®ä¸º4ï¼Œä½†æ˜¯.prettierrcä¸­é…ç½®ä¸º2ï¼Œæœ€åæ‰§è¡Œå‘½ä»¤åå°±ä¼šå‘ç°ä½¿ç”¨çš„æ˜¯.prettierrcä¸­çš„2ä¸ªç©ºæ ¼ã€‚

## ä¹ã€æ€»ç»“

åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œäº†è§£äº†Typescripté¡¹ç›®å·¥ç¨‹çš„åˆ›å»ºå’Œé…ç½®ï¼Œä»£ç æ ¼å¼åŒ–ã€ä»£ç å‹ç¼©å’Œæ··æ·†ã€ä»£ç æ£€æŸ¥ç›¸å…³çš„å†…å®¹ã€‚ä½†æ˜¯éƒ½æ˜¯ç®€å•äº†è§£ä¸€ä¸‹ï¼Œçœ‹åˆ°åˆ«äººçš„é¡¹ç›®å·¥ç¨‹çš„æ—¶å€™çŸ¥é“è¿™äº›æ–‡ä»¶éƒ½æ˜¯åšä»€ä¹ˆçš„ï¼Œåç»­æœ‰å¿…è¦çš„è¯å†æ·±å…¥å­¦ä¹ ã€‚

> å‚è€ƒèµ„æ–™ï¼š
>
> [ä½¿ç”¨ typescript å¿«é€Ÿå¼€å‘ä¸€ä¸ª cli - Jason Long - åšå®¢å›­](https://www.cnblogs.com/JasonLong/p/14075724.html)
>
> [(2 å°ç§ä¿¡) TypeScriptï¼šTypeScripté¡¹ç›®å®æˆ˜ï¼šæ„å»ºä¸€ä¸ªCLIå·¥å…· - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/710543838)
